var I=Object.defineProperty;var g=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var x=(s,a,r)=>a in s?I(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r,b=(s,a)=>{for(var r in a||(a={}))_.call(a,r)&&x(s,r,a[r]);if(g)for(var r of g(a))T.call(a,r)&&x(s,r,a[r]);return s};import{G as R,u as v,d as N,f as S,g as O,t as h,D as j}from"./App.1de4bb37.js";import{r as n}from"./vendor.fd4def91.js";import{j as e,a as i,F}from"./index.37067801.js";const k=s=>h.success(s,{position:h.POSITION.TOP_RIGHT,autoClose:2e3}),z=s=>h.error(s,{position:h.POSITION.TOP_RIGHT,autoClose:2e3}),A=({_id:s,firstname:a,lastname:r,gender:p,profilePic:o})=>{const d=v();return e("div",{className:"col s6 m4",children:e("div",{onClick:m=>d(`/learner/${s}`),className:"hoverable z-depth-0 hoverable sub-modal-texts",style:{cursor:"pointer",border:"1px solid #d3d3d3",borderRadius:"2px",padding:"5px",marginBottom:"5px"},children:i("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[e("img",{style:{height:"100px",width:"100px",objectFit:"contain",border:"1px solid #d3d3d3",borderRadius:"50%"},src:o||j}),e("ul",{style:{paddingLeft:"20px"},children:e("li",{style:{letterSpacing:"1px"},children:i("b",{children:[a," ",r]})})})]})})})},P=({classRefId:s})=>{const{authToken:a,isTeacher:r}=n.exports.useContext(R),p=v(),[o,d]=n.exports.useState([]),[m,w]=n.exports.useState([]),[y,C]=n.exports.useState(!1),[u,f]=n.exports.useState("");if(n.exports.useEffect(()=>{N.get(`/api/grade/learners/${s}`,{headers:{Authorization:`Bearer ${a}`}}).then(({data:t})=>{if(t){let l=t.learners;d(l),w(l);return}f("Failed to fetch learners")}).catch(t=>{f(t.message)}).finally(()=>{C(!1)})},[]),y)return e(S,{});const L=t=>{let l=(t.target.value||"").toLowerCase();if(!l){d(m);return}d(m.filter(c=>c.firstname.toLowerCase().indexOf(l)>-1||c.lastname.toLowerCase().indexOf(l)>-1))};return i(F,{children:[i("div",{className:"row",children:[i("div",{className:"col s12 m8 left-align",children:[i("button",{disabled:r,className:"waves-effect waves-light btn-flat",style:{marginRight:"5px"},onClick:t=>p("/learner/import"),children:[e("i",{className:"material-icons right",children:"cloud_upload"}),"Import Learners"]}),i("button",{style:{marginRight:"5px"},disabled:r,className:"waves-effect waves-light btn-flat",onClick:t=>p("/learner/new"),children:[e("i",{className:"material-icons right",children:"person_add"}),"Add Learner"]}),i("button",{disabled:!o.length,className:"waves-effect waves-light btn-flat",onClick:t=>{const l=localStorage.getItem("classRefId")||"";N.get(`/api/grade/learners/credentials/${l}`,{headers:{Authorization:`Bearer ${a}`}}).then(async({data:c})=>{if(c){if(await O(c,"credentials.xlsx")){k("Exported leaners credentials successfully!");return}z("Failed to export learners credentials. Please contact zoezi team")}})},children:[e("i",{className:"material-icons right",children:"cloud_download"}),"Export Credentials"]})]}),e("div",{className:"col s12 m4 right-align",children:e("input",{type:"search",className:"browser-default",onChange:L,style:{border:"1px solid #d3d3d3",borderRadius:"20px",lineHeight:"1px",padding:"5px 10px"},placeholder:"search learner..."})})]}),u?e("div",{className:"row",children:e("div",{className:"col s12",children:i("div",{className:"sub-modal-texts",style:{borderLeft:"2px solid red",paddingLeft:"5px",paddingRight:"5px",borderRadius:"3px",lineHeight:"4em",backgroundColor:"rgba(255,0,0, 0.1)",display:"flex",flexDirection:"row",alignItems:"center"},children:[e("i",{className:"material-icons left",children:"error_outline"}),e("p",{children:u})]})})}):null,e("div",{className:"row",children:o.map((t,l)=>e(A,b({},t),l))})]})};export{P as default};
