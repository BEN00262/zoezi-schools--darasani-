var Te=Object.defineProperty,je=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var fe=(t,n,c)=>n in t?Te(t,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[n]=c,w=(t,n)=>{for(var c in n||(n={}))Be.call(n,c)&&fe(t,c,n[c]);if(he)for(var c of he(n))Ve.call(n,c)&&fe(t,c,n[c]);return t},j=(t,n)=>je(t,$e(n));import{_ as N,E as Me,F as k,H as ge,I as me,J as ve,R as E,M as xe,K as be,y as X,m as Ce,N as De}from"./App.efc54832.js";import{R as P,a as m}from"./vendor.0b632b43.js";import{j as o,a as x,F as Ke}from"./index.6a838d8b.js";import{totalStudentsInSubject as ee,studentsWhoPartcipatedState as Qe}from"./TopFailedQuestions.f0f8f9e8.js";function ye(t,n){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),c.push.apply(c,a)}return c}function Ae(t){for(var n=1;n<arguments.length;n++){var c=arguments[n]!=null?arguments[n]:{};n%2?ye(Object(c),!0).forEach(function(a){N(t,a,c[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):ye(Object(c)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(c,a))})}return t}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},q(t)}function Le(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Je(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fe(t,n){if(n&&(Me(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Je(t)}function Se(t){var n=Le();return function(){var a=q(t),e;if(n){var r=q(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Fe(this,e)}}var L=function(n){var c,a="".concat(n.rootPrefixCls,"-item"),e=k(a,"".concat(a,"-").concat(n.page),(c={},N(c,"".concat(a,"-active"),n.active),N(c,"".concat(a,"-disabled"),!n.page),N(c,n.className,!!n.className),c)),r=function(){n.onClick(n.page)},s=function(u){n.onKeyPress(u,n.onClick,n.page)};return P.createElement("li",{title:n.showTitle?n.page:null,className:e,onClick:r,onKeyPress:s,tabIndex:"0"},n.itemRender(n.page,"page",P.createElement("a",{rel:"nofollow"},n.page)))},T={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40},Pe=function(t){ge(c,t);var n=Se(c);function c(){var a;me(this,c);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return a=n.call.apply(n,[this].concat(r)),a.state={goInputText:""},a.buildOptionText=function(l){return"".concat(l," ").concat(a.props.locale.items_per_page)},a.changeSize=function(l){a.props.changeSize(Number(l))},a.handleChange=function(l){a.setState({goInputText:l.target.value})},a.handleBlur=function(l){var u=a.props,i=u.goButton,d=u.quickGo,p=u.rootPrefixCls,h=a.state.goInputText;i||h===""||(a.setState({goInputText:""}),!(l.relatedTarget&&(l.relatedTarget.className.indexOf("".concat(p,"-item-link"))>=0||l.relatedTarget.className.indexOf("".concat(p,"-item"))>=0))&&d(a.getValidValue()))},a.go=function(l){var u=a.state.goInputText;u!==""&&(l.keyCode===T.ENTER||l.type==="click")&&(a.setState({goInputText:""}),a.props.quickGo(a.getValidValue()))},a}return ve(c,[{key:"getValidValue",value:function(){var e=this.state.goInputText;return!e||isNaN(e)?void 0:Number(e)}},{key:"getPageSizeOptions",value:function(){var e=this.props,r=e.pageSize,s=e.pageSizeOptions;return s.some(function(l){return l.toString()===r.toString()})?s:s.concat([r.toString()]).sort(function(l,u){var i=isNaN(Number(l))?0:Number(l),d=isNaN(Number(u))?0:Number(u);return i-d})}},{key:"render",value:function(){var e=this,r=this.props,s=r.pageSize,l=r.locale,u=r.rootPrefixCls,i=r.changeSize,d=r.quickGo,p=r.goButton,h=r.selectComponentClass,f=r.buildOptionText,v=r.selectPrefixCls,g=r.disabled,S=this.state.goInputText,_="".concat(u,"-options"),I=h,J=null,$=null,B=null;if(!i&&!d)return null;var F=this.getPageSizeOptions();if(i&&I){var W=F.map(function(V,z){return P.createElement(I.Option,{key:z,value:V.toString()},(f||e.buildOptionText)(V))});J=P.createElement(I,{disabled:g,prefixCls:v,showSearch:!1,className:"".concat(_,"-size-changer"),optionLabelProp:"children",dropdownMatchSelectWidth:!1,value:(s||F[0]).toString(),onChange:this.changeSize,getPopupContainer:function(z){return z.parentNode},"aria-label":l.page_size,defaultOpen:!1},W)}return d&&(p&&(B=typeof p=="boolean"?P.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:g,className:"".concat(_,"-quick-jumper-button")},l.jump_to_confirm):P.createElement("span",{onClick:this.go,onKeyUp:this.go},p)),$=P.createElement("div",{className:"".concat(_,"-quick-jumper")},l.jump_to,P.createElement("input",{disabled:g,type:"text",value:S,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":l.page}),l.page,B)),P.createElement("li",{className:"".concat(_)},J,$)}}]),c}(P.Component);Pe.defaultProps={pageSizeOptions:["10","20","50","100"]};var Ue={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"};function te(){}function Ne(t){var n=Number(t);return typeof n=="number"&&!isNaN(n)&&isFinite(n)&&Math.floor(n)===n}function qe(t,n,c){return c}function R(t,n,c){var a=typeof t=="undefined"?n.pageSize:t;return Math.floor((c.total-1)/a)+1}var _e=function(t){ge(c,t);var n=Se(c);function c(a){var e;me(this,c),e=n.call(this,a),e.getJumpPrevPage=function(){return Math.max(1,e.state.current-(e.props.showLessItems?3:5))},e.getJumpNextPage=function(){return Math.min(R(void 0,e.state,e.props),e.state.current+(e.props.showLessItems?3:5))},e.getItemIcon=function(i,d){var p=e.props.prefixCls,h=i||o("button",{type:"button","aria-label":d,className:"".concat(p,"-item-link")});return typeof i=="function"&&(h=P.createElement(i,Ae({},e.props))),h},e.savePaginationNode=function(i){e.paginationNode=i},e.isValid=function(i){var d=e.props.total;return Ne(i)&&i!==e.state.current&&Ne(d)&&d>0},e.shouldDisplayQuickJumper=function(){var i=e.props,d=i.showQuickJumper,p=i.total,h=e.state.pageSize;return p<=h?!1:d},e.handleKeyDown=function(i){(i.keyCode===T.ARROW_UP||i.keyCode===T.ARROW_DOWN)&&i.preventDefault()},e.handleKeyUp=function(i){var d=e.getValidValue(i),p=e.state.currentInputValue;d!==p&&e.setState({currentInputValue:d}),i.keyCode===T.ENTER?e.handleChange(d):i.keyCode===T.ARROW_UP?e.handleChange(d-1):i.keyCode===T.ARROW_DOWN&&e.handleChange(d+1)},e.handleBlur=function(i){var d=e.getValidValue(i);e.handleChange(d)},e.changePageSize=function(i){var d=e.state.current,p=R(i,e.state,e.props);d=d>p?p:d,p===0&&(d=e.state.current),typeof i=="number"&&("pageSize"in e.props||e.setState({pageSize:i}),"current"in e.props||e.setState({current:d,currentInputValue:d})),e.props.onShowSizeChange(d,i),"onChange"in e.props&&e.props.onChange&&e.props.onChange(d,i)},e.handleChange=function(i){var d=e.props.disabled,p=i;if(e.isValid(p)&&!d){var h=R(void 0,e.state,e.props);p>h?p=h:p<1&&(p=1),"current"in e.props||e.setState({current:p,currentInputValue:p});var f=e.state.pageSize;return e.props.onChange(p,f),p}return e.state.current},e.prev=function(){e.hasPrev()&&e.handleChange(e.state.current-1)},e.next=function(){e.hasNext()&&e.handleChange(e.state.current+1)},e.jumpPrev=function(){e.handleChange(e.getJumpPrevPage())},e.jumpNext=function(){e.handleChange(e.getJumpNextPage())},e.hasPrev=function(){return e.state.current>1},e.hasNext=function(){return e.state.current<R(void 0,e.state,e.props)},e.runIfEnter=function(i,d){if(i.key==="Enter"||i.charCode===13){for(var p=arguments.length,h=new Array(p>2?p-2:0),f=2;f<p;f++)h[f-2]=arguments[f];d.apply(void 0,h)}},e.runIfEnterPrev=function(i){e.runIfEnter(i,e.prev)},e.runIfEnterNext=function(i){e.runIfEnter(i,e.next)},e.runIfEnterJumpPrev=function(i){e.runIfEnter(i,e.jumpPrev)},e.runIfEnterJumpNext=function(i){e.runIfEnter(i,e.jumpNext)},e.handleGoTO=function(i){(i.keyCode===T.ENTER||i.type==="click")&&e.handleChange(e.state.currentInputValue)};var r=a.onChange!==te,s="current"in a;s&&!r&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var l=a.defaultCurrent;"current"in a&&(l=a.current);var u=a.defaultPageSize;return"pageSize"in a&&(u=a.pageSize),l=Math.min(l,R(u,void 0,a)),e.state={current:l,currentInputValue:l,pageSize:u},e}return ve(c,[{key:"componentDidUpdate",value:function(e,r){var s=this.props.prefixCls;if(r.current!==this.state.current&&this.paginationNode){var l=this.paginationNode.querySelector(".".concat(s,"-item-").concat(r.current));l&&document.activeElement===l&&l.blur()}}},{key:"getValidValue",value:function(e){var r=e.target.value,s=R(void 0,this.state,this.props),l=this.state.currentInputValue,u;return r===""?u=r:isNaN(Number(r))?u=l:r>=s?u=s:u=Number(r),u}},{key:"getShowSizeChanger",value:function(){var e=this.props,r=e.showSizeChanger,s=e.total,l=e.totalBoundaryShowSizeChanger;return typeof r!="undefined"?r:s>l}},{key:"renderPrev",value:function(e){var r=this.props,s=r.prevIcon,l=r.itemRender,u=l(e,"prev",this.getItemIcon(s,"prev page")),i=!this.hasPrev();return m.exports.isValidElement(u)?m.exports.cloneElement(u,{disabled:i}):u}},{key:"renderNext",value:function(e){var r=this.props,s=r.nextIcon,l=r.itemRender,u=l(e,"next",this.getItemIcon(s,"next page")),i=!this.hasNext();return m.exports.isValidElement(u)?m.exports.cloneElement(u,{disabled:i}):u}},{key:"render",value:function(){var e=this,r=this.props,s=r.prefixCls,l=r.className,u=r.style,i=r.disabled,d=r.hideOnSinglePage,p=r.total,h=r.locale,f=r.showQuickJumper,v=r.showLessItems,g=r.showTitle,S=r.showTotal,_=r.simple,I=r.itemRender,J=r.showPrevNextJumpers,$=r.jumpPrevIcon,B=r.jumpNextIcon,F=r.selectComponentClass,W=r.selectPrefixCls,V=r.pageSizeOptions,z=this.state,b=z.current,M=z.pageSize,ke=z.currentInputValue;if(d===!0&&p<=M)return null;var C=R(void 0,this.state,this.props),y=[],re=null,ae=null,ie=null,se=null,D=null,U=f&&f.goButton,O=v?1:2,oe=b-1>0?b-1:0,le=b+1<C?b+1:C,ce=Object.keys(this.props).reduce(function(de,A){return(A.substr(0,5)==="data-"||A.substr(0,5)==="aria-"||A==="role")&&(de[A]=e.props[A]),de},{});if(_)return U&&(typeof U=="boolean"?D=o("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO,children:h.jump_to_confirm}):D=o("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO,children:U}),D=o("li",{title:g?"".concat(h.jump_to).concat(b,"/").concat(C):null,className:"".concat(s,"-simple-pager"),children:D})),x("ul",j(w({className:k(s,"".concat(s,"-simple"),N({},"".concat(s,"-disabled"),i),l),style:u,ref:this.savePaginationNode},ce),{children:[o("li",{title:g?h.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:k("".concat(s,"-prev"),N({},"".concat(s,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev(),children:this.renderPrev(oe)}),x("li",{title:g?"".concat(b,"/").concat(C):null,className:"".concat(s,"-simple-pager"),children:[o("input",{type:"text",value:ke,disabled:i,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:"3"}),o("span",{className:"".concat(s,"-slash"),children:"/"}),C]}),o("li",{title:g?h.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:k("".concat(s,"-next"),N({},"".concat(s,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext(),children:this.renderNext(le)}),D]}));if(C<=3+O*2){var ue={locale:h,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:g,itemRender:I};C||y.push(m.exports.createElement(L,j(w({},ue),{key:"noPager",page:1,className:"".concat(s,"-item-disabled")})));for(var K=1;K<=C;K+=1){var we=b===K;y.push(m.exports.createElement(L,j(w({},ue),{key:K,page:K,active:we})))}}else{var Ee=v?h.prev_3:h.prev_5,Re=v?h.next_3:h.next_5;J&&(re=o("li",{title:g?Ee:null,onClick:this.jumpPrev,tabIndex:"0",onKeyPress:this.runIfEnterJumpPrev,className:k("".concat(s,"-jump-prev"),N({},"".concat(s,"-jump-prev-custom-icon"),!!$)),children:I(this.getJumpPrevPage(),"jump-prev",this.getItemIcon($,"prev page"))},"prev"),ae=o("li",{title:g?Re:null,tabIndex:"0",onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:k("".concat(s,"-jump-next"),N({},"".concat(s,"-jump-next-custom-icon"),!!B)),children:I(this.getJumpNextPage(),"jump-next",this.getItemIcon(B,"next page"))},"next")),se=o(L,{locale:h,last:!0,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,page:C,active:!1,showTitle:g,itemRender:I},C),ie=o(L,{locale:h,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,page:1,active:!1,showTitle:g,itemRender:I},1);var G=Math.max(1,b-O),H=Math.min(b+O,C);b-1<=O&&(H=1+O*2),C-b<=O&&(G=C-O*2);for(var Q=G;Q<=H;Q+=1){var ze=b===Q;y.push(o(L,{locale:h,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,page:Q,active:ze,showTitle:g,itemRender:I},Q))}b-1>=O*2&&b!==1+2&&(y[0]=m.exports.cloneElement(y[0],{className:"".concat(s,"-item-after-jump-prev")}),y.unshift(re)),C-b>=O*2&&b!==C-2&&(y[y.length-1]=m.exports.cloneElement(y[y.length-1],{className:"".concat(s,"-item-before-jump-next")}),y.push(ae)),G!==1&&y.unshift(ie),H!==C&&y.push(se)}var pe=null;S&&(pe=o("li",{className:"".concat(s,"-total-text"),children:S(p,[p===0?0:(b-1)*M+1,b*M>p?p:b*M])}));var Y=!this.hasPrev()||!C,Z=!this.hasNext()||!C;return x("ul",j(w({className:k(s,l,N({},"".concat(s,"-disabled"),i)),style:u,unselectable:"unselectable",ref:this.savePaginationNode},ce),{children:[pe,o("li",{title:g?h.prev_page:null,onClick:this.prev,tabIndex:Y?null:0,onKeyPress:this.runIfEnterPrev,className:k("".concat(s,"-prev"),N({},"".concat(s,"-disabled"),Y)),"aria-disabled":Y,children:this.renderPrev(oe)}),y,o("li",{title:g?h.next_page:null,onClick:this.next,tabIndex:Z?null:0,onKeyPress:this.runIfEnterNext,className:k("".concat(s,"-next"),N({},"".concat(s,"-disabled"),Z)),"aria-disabled":Z,children:this.renderNext(le)}),o(Pe,{disabled:i,locale:h,rootPrefixCls:s,selectComponentClass:F,selectPrefixCls:W,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:b,pageSize:M,pageSizeOptions:V,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:U})]}))}}],[{key:"getDerivedStateFromProps",value:function(e,r){var s={};if("current"in e&&(s.current=e.current,e.current!==r.current&&(s.currentInputValue=s.current)),"pageSize"in e&&e.pageSize!==r.pageSize){var l=r.current,u=R(e.pageSize,r,e);l=l>u?u:l,"current"in e||(s.current=l,s.currentInputValue=l),s.pageSize=e.pageSize}return s}}]),c}(P.Component);_e.defaultProps={defaultCurrent:1,total:0,defaultPageSize:10,onChange:te,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:te,locale:Ue,style:{},itemRender:qe,totalBoundaryShowSizeChanger:50};const We=({option:t,index:n,position:c,analytics:a})=>o("div",{children:o("p",{children:x("label",{children:[o("input",{type:"checkbox",className:"filled-in",disabled:!0,checked:t.isCorrect,name:`options_${c}`}),o("span",{className:t.isCorrect?"green-text":"black-text",children:o("b",{children:o("span",{dangerouslySetInnerHTML:{__html:t.option}})})})]})})},n),Ge=({option:t,index:n,position:c,analytics:a})=>o("div",{children:o("p",{children:x("label",{children:[o("input",{disabled:!0,required:!0,checked:t.isCorrect,className:"with-gap",name:`options_${c}`,type:"radio"}),o("span",{className:t.isCorrect?"green-text":"black-text",children:o("b",{children:o("span",{dangerouslySetInnerHTML:{__html:`
                                <div>${t.option}</div>
                                <div class="sub-modal-texts ${t.isCorrect?"green-text":"red-text"}">Selected by (${a}%) of the students</div>
                                `}})})})]})})},n),He=({question:t,failed:n,students:c,position:a,choices:e,paperName:r,questionPosition:s,paperID:l})=>{const u=E(ee),d=m.exports.useMemo(()=>{var f,v;return((v=(f=t==null?void 0:t.options_next)==null?void 0:f.filter(g=>g.isCorrect))==null?void 0:v.length)||0},[t])>1||!1;m.exports.useEffect(()=>{let f=document.querySelectorAll(".question-comp img");xe.Materialbox.init(f)},[]);const h=(()=>{let f=d?We:Ge;return({index:v,option:g,analytics:S})=>o(f,{analytics:S,position:v+1,option:g,index:v},v)})();return x("div",{children:[r&&s&&s>0&&l?o("div",{className:"center",style:{marginTop:"8px"},children:o(be,{to:`/view-paper/${l}/${t._id}`,children:x("span",{className:"sub-modal-texts teal-text",style:{border:"1px solid #d3d3d3",padding:"5px 15px",cursor:"pointer"},children:[" ",x("b",{children:[r," | Number ",s]})," "]})})}):null,o("span",{dangerouslySetInnerHTML:{__html:`
                    <div style="display:flex;flex-direction:row;align-items:flex-start;">
                        <p style="margin-right:5px;">${a}.  </p>
                        <div>
                            <strong class="question-comp">${t.question}</strong>
                            <span class="sub-modal-texts green-text" style="margin-left:5px;">
                                <b>[ Attempted by ${c} (${(c/(u||1)*100).toFixed(0)}%) student(s) ]</b>
                            </span>

                            <span class="sub-modal-texts red-text" style="margin-left:5px;">
                                <b>[ Failed by ${(n/c*100).toFixed(0)}% of the students ]</b>
                            </span>
                        </div>
                    </div>
                `}}),o("div",{style:{marginTop:"10px",marginLeft:"17px",marginBottom:"10px"},children:t.options_next&&t.options_next.map((f,v)=>{let g=Object.keys(e).find(S=>S===f._id);return h({option:f,index:v,analytics:((g&&e[f._id]||0)/c*100).toFixed(0)})})}),o("div",{style:{marginLeft:"17px",marginBottom:"10px"},children:o("span",{dangerouslySetInnerHTML:{__html:`
                        <blockquote class="red lighten-5">
                            <span>
                            ${t.additionalInfo}
                            </span>
                        </blockquote>
                    `}})})]})};const Ye=({option:t,index:n,position:c,optionAnalytics:a})=>o("div",{children:o("p",{children:x("label",{children:[o("input",{type:"checkbox",checked:t.isCorrect,className:"filled-in",disabled:!0,required:!0,name:`sub_option_answer_${c}`}),o("span",{className:t.isCorrect?"green-text":"black-text",children:o("b",{children:o("span",{dangerouslySetInnerHTML:{__html:`
                                        <div>${t.option}</div>
                                        <div class="sub-modal-texts ${t.isCorrect?"green-text":"red-text"}">Selected by (${a.toFixed(0)}%) of the students</div>
                                    `}})})})]})})},n),Ze=({option:t,keyValue:n,position:c,optionAnalytics:a})=>o("p",{children:x("label",{children:[o("input",{disabled:!0,checked:t.isCorrect,required:!0,className:"with-gap",type:"radio",name:`sub_option_answer_${c}`}),o("span",{className:t.isCorrect?"green-text":"black-text",children:o("b",{children:o("span",{dangerouslySetInnerHTML:{__html:`
                                    <div>${t.option}</div>
                                    <div class="sub-modal-texts ${t.isCorrect?"green-text":"red-text"}">Selected by (${a.toFixed(0)}%) of the students</div>
                                    `}})})})]})},n),Xe=({children:t,index:n})=>x("div",{style:{marginLeft:"15px",marginTop:"5px",marginBottom:"5px",display:"flex",flexDirection:"row",alignItems:"flex-start"},children:[x("p",{children:[n+1,"."]}),o("div",{children:t})]}),et=({children:t})=>o("div",{style:{marginLeft:"15px",marginTop:"5px",marginBottom:"5px"},children:t}),tt=({question:t,index:n,savedState:c,parentId:a})=>{const e=E(Oe),r=E(Ie),s=E(ee),l=m.exports.useMemo(()=>{var h,f;return((f=(h=t==null?void 0:t.options)==null?void 0:h.filter(v=>v.isCorrect))==null?void 0:f.length)>1},[t]),u=r?Xe:et,i=m.exports.useMemo(()=>e.find(h=>h.questionId===t._id)||{},[e,t]),p=(()=>{let h=l?Ye:Ze;return({position:f,index:v,option:g,quesIndex:S,optionAnalytics:_})=>o(h,{keyValue:`sub_option_${v}_${S}`,position:f,option:g,index:v,optionAnalytics:_},`sub_option_${v}_${S}`)})();return x("div",{style:{marginLeft:"6px"},children:[o("span",{dangerouslySetInnerHTML:{__html:r?"":`
                        <div style="display:flex;flex-direction:row;">
                            <p style="margin-right:5px;">
                                ${n+1}.  
                            </p>
                            <p><strong>
                            ${t.question}
                            </strong></p>
                        </div>
                    `}}),x(u,{index:n,children:[t.options.map((h,f)=>{let v=Object.keys(i).length?i.choices[h._id]/(i.students||1)*100:0;return p({position:n,index:n,quesIndex:f,option:h,optionAnalytics:v||0})}),x("div",{style:{letterSpacing:"1px",display:"flex",flexDirection:"row",alignItems:"center"},className:"sub-modal-texts blue-text",children:[o("i",{className:"material-icons",children:"info"})," ",x("b",{style:{marginLeft:"4px"},children:["Attempted by ",i.students," ( ",((i.students||0)/(s||1)*100).toFixed(0)," %) of the learners"]})]})]}),o("div",{style:{marginLeft:"15px",marginBottom:"10px"},children:o("span",{dangerouslySetInnerHTML:{__html:`
                        <blockquote class="red lighten-5">
                            <span>
                                ${t.additionalInfo}
                            </span>
                        </blockquote>
                    `}})})]})},nt=t=>{let n=5,c=t.length%n,a=Math.floor(t.length/n)+(c>0?1:0),e=new Array(a).fill([]);for(let r=0;r<a;r++)e[r]=t.slice(r*n,r*n+n);return e},rt=P.memo(({parentId:t,sub_questions:n,savedChildren:c})=>{const a=E(ne),e=m.exports.useCallback(u=>c.find(i=>i.question===u)||null,[n]);let r=m.exports.useMemo(()=>nt(n||[]),[n]),s=r[a],l=r.slice(0,a).reduce((u,i)=>u+i.length,0);return o(Ke,{children:s.map((u,i)=>o(tt,{parentId:t,question:u,savedState:e(u._id),index:i+l},i))})}),Ie=X({key:"isBrokenPassageId",default:!1}),Oe=X({key:"subQuestionsContextStateId",default:[]}),at=({question:t,failed:n,students:c,children_stats:a,paperName:e,questionPosition:r,paperID:s})=>{const l=Ce(Ie),u=Ce(Oe);E(Qe);const[i,d]=m.exports.useState([]),[p,h]=m.exports.useState(t.question),[f,v]=m.exports.useState(-1),g=E(ne),S=E(ee);return m.exports.useEffect(()=>{let _=document.querySelectorAll(".question-comp img");xe.Materialbox.init(_)},[]),m.exports.useEffect(()=>{v(Math.random())},[g]),m.exports.useEffect(()=>{a.length&&u(a)},[a]),m.exports.useEffect(()=>{l(t.children[0].question.trim().replace(/(<([^>]+)>)/ig,"").trim().length<=1)},[t]),x("div",{children:[e&&r&&r>0&&s?o("div",{className:"center",style:{marginTop:"8px"},children:o(be,{to:`/view-paper/${s}/${t._id}`,children:x("span",{className:"sub-modal-texts teal-text",style:{border:"1px solid #d3d3d3",padding:"5px 15px",cursor:"pointer"},children:[" ",x("b",{children:[e," | Number ",r]})," "]})})}):null,o("span",{dangerouslySetInnerHTML:{__html:`
                    <div>
                        <div>
                            <span class="sub-modal-texts green-text" style="margin-left:5px;">
                                <b>[ Attempted by ${c} (${(c/(S||1)*100).toFixed(0)}%) student(s) ]</b>
                            </span>
                        </div>
                        <div class="question-comp">${p}</div>
                    </div>`}}),o("div",{style:{marginTop:"5px"},children:o(rt,{parentId:t._id,savedChildren:i,sub_questions:t.children||[]},f)})]})},it=t=>{if(!t.question)return null;switch(t.question.questionType){case"normal":return o(He,w({},t));case"comprehension":return o(at,w({},t));default:return null}},ne=X({key:"compSubQuestionPageId",default:0}),pt=({stats:t})=>{const[n,c]=m.exports.useState(0),[a,e]=m.exports.useState(-1),[r,s]=De(ne),[l,u]=m.exports.useState({});m.exports.useEffect(()=>{t.length&&(s(0),u(t[n]),e(Math.random()))},[n]);const i=m.exports.useMemo(()=>l.question&&l.question.questionType==="comprehension"?Math.floor((l.question?(l.question.children||[]).length:0)/5)+((l.question?(l.question.children||[]).length:0)%5>0?1:0):0,[l]);return x("div",{children:[o("div",{className:"row",children:o("div",{className:"col s12 left-align",children:t.length?o(_e,{onChange:(d,p)=>{c(d-1)},current:n+1,total:t.length,pageSize:1}):null})}),l.question&&l.question.questionType==="comprehension"&&i>1?o("div",{style:{border:"1px solid #d3d3d3",marginBottom:"5px",borderRadius:"2px",padding:"5px 6px",position:"sticky",top:64,zIndex:2},children:x("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[o("button",{disabled:r===0,className:"waves-effect waves-light btn-small z-depth-0",onClick:d=>{s(p=>p>0?p-1:p)},children:o("i",{className:"material-icons",children:"arrow_back"})}),o("button",{className:"waves-effect waves-light btn-small z-depth-0",disabled:r>=i-1,onClick:d=>{s(p=>p+1)},children:o("i",{className:"material-icons",children:"arrow_forward"})})]})}):null,o("div",{className:"col s12",style:{border:"1px solid #d3d3d3"},children:t.length>n?o(it,j(w({},l),{position:n+1}),a):o("p",{className:"center",children:"No questions found"})})]})};export{ne as compSubQuestionPageState,pt as default};
