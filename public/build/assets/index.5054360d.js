var ze=Object.defineProperty,Te=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var fe=(t,n,c)=>n in t?ze(t,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[n]=c,w=(t,n)=>{for(var c in n||(n={}))$e.call(n,c)&&fe(t,c,n[c]);if(he)for(var c of he(n))Be.call(n,c)&&fe(t,c,n[c]);return t},j=(t,n)=>Te(t,je(n));import{_ as P,D as Ve,E as O,F as ge,H as me,I as ve,R as E,M as xe,y as X,m as be,J as Me}from"./App.1e349059.js";import{R as S,a as g}from"./vendor.0b632b43.js";import{j as o,a as x,F as De}from"./index.b5385275.js";import{totalStudentsInSubject as ee,studentsWhoPartcipatedState as Qe}from"./TopFailedQuestions.8d00a79c.js";function Ce(t,n){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),c.push.apply(c,a)}return c}function Ke(t){for(var n=1;n<arguments.length;n++){var c=arguments[n]!=null?arguments[n]:{};n%2?Ce(Object(c),!0).forEach(function(a){P(t,a,c[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):Ce(Object(c)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(c,a))})}return t}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},q(t)}function Ae(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Le(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Je(t,n){if(n&&(Ve(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Le(t)}function ye(t){var n=Ae();return function(){var a=q(t),e;if(n){var r=q(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Je(this,e)}}var L=function(n){var c,a="".concat(n.rootPrefixCls,"-item"),e=O(a,"".concat(a,"-").concat(n.page),(c={},P(c,"".concat(a,"-active"),n.active),P(c,"".concat(a,"-disabled"),!n.page),P(c,n.className,!!n.className),c)),r=function(){n.onClick(n.page)},s=function(p){n.onKeyPress(p,n.onClick,n.page)};return S.createElement("li",{title:n.showTitle?n.page:null,className:e,onClick:r,onKeyPress:s,tabIndex:"0"},n.itemRender(n.page,"page",S.createElement("a",{rel:"nofollow"},n.page)))},T={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40},Se=function(t){ge(c,t);var n=ye(c);function c(){var a;me(this,c);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return a=n.call.apply(n,[this].concat(r)),a.state={goInputText:""},a.buildOptionText=function(l){return"".concat(l," ").concat(a.props.locale.items_per_page)},a.changeSize=function(l){a.props.changeSize(Number(l))},a.handleChange=function(l){a.setState({goInputText:l.target.value})},a.handleBlur=function(l){var p=a.props,i=p.goButton,h=p.quickGo,d=p.rootPrefixCls,u=a.state.goInputText;i||u===""||(a.setState({goInputText:""}),!(l.relatedTarget&&(l.relatedTarget.className.indexOf("".concat(d,"-item-link"))>=0||l.relatedTarget.className.indexOf("".concat(d,"-item"))>=0))&&h(a.getValidValue()))},a.go=function(l){var p=a.state.goInputText;p!==""&&(l.keyCode===T.ENTER||l.type==="click")&&(a.setState({goInputText:""}),a.props.quickGo(a.getValidValue()))},a}return ve(c,[{key:"getValidValue",value:function(){var e=this.state.goInputText;return!e||isNaN(e)?void 0:Number(e)}},{key:"getPageSizeOptions",value:function(){var e=this.props,r=e.pageSize,s=e.pageSizeOptions;return s.some(function(l){return l.toString()===r.toString()})?s:s.concat([r.toString()]).sort(function(l,p){var i=isNaN(Number(l))?0:Number(l),h=isNaN(Number(p))?0:Number(p);return i-h})}},{key:"render",value:function(){var e=this,r=this.props,s=r.pageSize,l=r.locale,p=r.rootPrefixCls,i=r.changeSize,h=r.quickGo,d=r.goButton,u=r.selectComponentClass,f=r.buildOptionText,v=r.selectPrefixCls,m=r.disabled,_=this.state.goInputText,k="".concat(p,"-options"),N=u,J=null,$=null,B=null;if(!i&&!h)return null;var F=this.getPageSizeOptions();if(i&&N){var W=F.map(function(V,z){return S.createElement(N.Option,{key:z,value:V.toString()},(f||e.buildOptionText)(V))});J=S.createElement(N,{disabled:m,prefixCls:v,showSearch:!1,className:"".concat(k,"-size-changer"),optionLabelProp:"children",dropdownMatchSelectWidth:!1,value:(s||F[0]).toString(),onChange:this.changeSize,getPopupContainer:function(z){return z.parentNode},"aria-label":l.page_size,defaultOpen:!1},W)}return h&&(d&&(B=typeof d=="boolean"?S.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:m,className:"".concat(k,"-quick-jumper-button")},l.jump_to_confirm):S.createElement("span",{onClick:this.go,onKeyUp:this.go},d)),$=S.createElement("div",{className:"".concat(k,"-quick-jumper")},l.jump_to,S.createElement("input",{disabled:m,type:"text",value:_,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":l.page}),l.page,B)),S.createElement("li",{className:"".concat(k)},J,$)}}]),c}(S.Component);Se.defaultProps={pageSizeOptions:["10","20","50","100"]};var Fe={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"};function te(){}function Pe(t){var n=Number(t);return typeof n=="number"&&!isNaN(n)&&isFinite(n)&&Math.floor(n)===n}function Ue(t,n,c){return c}function R(t,n,c){var a=typeof t=="undefined"?n.pageSize:t;return Math.floor((c.total-1)/a)+1}var Ne=function(t){ge(c,t);var n=ye(c);function c(a){var e;me(this,c),e=n.call(this,a),e.getJumpPrevPage=function(){return Math.max(1,e.state.current-(e.props.showLessItems?3:5))},e.getJumpNextPage=function(){return Math.min(R(void 0,e.state,e.props),e.state.current+(e.props.showLessItems?3:5))},e.getItemIcon=function(i,h){var d=e.props.prefixCls,u=i||o("button",{type:"button","aria-label":h,className:"".concat(d,"-item-link")});return typeof i=="function"&&(u=S.createElement(i,Ke({},e.props))),u},e.savePaginationNode=function(i){e.paginationNode=i},e.isValid=function(i){var h=e.props.total;return Pe(i)&&i!==e.state.current&&Pe(h)&&h>0},e.shouldDisplayQuickJumper=function(){var i=e.props,h=i.showQuickJumper,d=i.total,u=e.state.pageSize;return d<=u?!1:h},e.handleKeyDown=function(i){(i.keyCode===T.ARROW_UP||i.keyCode===T.ARROW_DOWN)&&i.preventDefault()},e.handleKeyUp=function(i){var h=e.getValidValue(i),d=e.state.currentInputValue;h!==d&&e.setState({currentInputValue:h}),i.keyCode===T.ENTER?e.handleChange(h):i.keyCode===T.ARROW_UP?e.handleChange(h-1):i.keyCode===T.ARROW_DOWN&&e.handleChange(h+1)},e.handleBlur=function(i){var h=e.getValidValue(i);e.handleChange(h)},e.changePageSize=function(i){var h=e.state.current,d=R(i,e.state,e.props);h=h>d?d:h,d===0&&(h=e.state.current),typeof i=="number"&&("pageSize"in e.props||e.setState({pageSize:i}),"current"in e.props||e.setState({current:h,currentInputValue:h})),e.props.onShowSizeChange(h,i),"onChange"in e.props&&e.props.onChange&&e.props.onChange(h,i)},e.handleChange=function(i){var h=e.props.disabled,d=i;if(e.isValid(d)&&!h){var u=R(void 0,e.state,e.props);d>u?d=u:d<1&&(d=1),"current"in e.props||e.setState({current:d,currentInputValue:d});var f=e.state.pageSize;return e.props.onChange(d,f),d}return e.state.current},e.prev=function(){e.hasPrev()&&e.handleChange(e.state.current-1)},e.next=function(){e.hasNext()&&e.handleChange(e.state.current+1)},e.jumpPrev=function(){e.handleChange(e.getJumpPrevPage())},e.jumpNext=function(){e.handleChange(e.getJumpNextPage())},e.hasPrev=function(){return e.state.current>1},e.hasNext=function(){return e.state.current<R(void 0,e.state,e.props)},e.runIfEnter=function(i,h){if(i.key==="Enter"||i.charCode===13){for(var d=arguments.length,u=new Array(d>2?d-2:0),f=2;f<d;f++)u[f-2]=arguments[f];h.apply(void 0,u)}},e.runIfEnterPrev=function(i){e.runIfEnter(i,e.prev)},e.runIfEnterNext=function(i){e.runIfEnter(i,e.next)},e.runIfEnterJumpPrev=function(i){e.runIfEnter(i,e.jumpPrev)},e.runIfEnterJumpNext=function(i){e.runIfEnter(i,e.jumpNext)},e.handleGoTO=function(i){(i.keyCode===T.ENTER||i.type==="click")&&e.handleChange(e.state.currentInputValue)};var r=a.onChange!==te,s="current"in a;s&&!r&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var l=a.defaultCurrent;"current"in a&&(l=a.current);var p=a.defaultPageSize;return"pageSize"in a&&(p=a.pageSize),l=Math.min(l,R(p,void 0,a)),e.state={current:l,currentInputValue:l,pageSize:p},e}return ve(c,[{key:"componentDidUpdate",value:function(e,r){var s=this.props.prefixCls;if(r.current!==this.state.current&&this.paginationNode){var l=this.paginationNode.querySelector(".".concat(s,"-item-").concat(r.current));l&&document.activeElement===l&&l.blur()}}},{key:"getValidValue",value:function(e){var r=e.target.value,s=R(void 0,this.state,this.props),l=this.state.currentInputValue,p;return r===""?p=r:isNaN(Number(r))?p=l:r>=s?p=s:p=Number(r),p}},{key:"getShowSizeChanger",value:function(){var e=this.props,r=e.showSizeChanger,s=e.total,l=e.totalBoundaryShowSizeChanger;return typeof r!="undefined"?r:s>l}},{key:"renderPrev",value:function(e){var r=this.props,s=r.prevIcon,l=r.itemRender,p=l(e,"prev",this.getItemIcon(s,"prev page")),i=!this.hasPrev();return g.exports.isValidElement(p)?g.exports.cloneElement(p,{disabled:i}):p}},{key:"renderNext",value:function(e){var r=this.props,s=r.nextIcon,l=r.itemRender,p=l(e,"next",this.getItemIcon(s,"next page")),i=!this.hasNext();return g.exports.isValidElement(p)?g.exports.cloneElement(p,{disabled:i}):p}},{key:"render",value:function(){var e=this,r=this.props,s=r.prefixCls,l=r.className,p=r.style,i=r.disabled,h=r.hideOnSinglePage,d=r.total,u=r.locale,f=r.showQuickJumper,v=r.showLessItems,m=r.showTitle,_=r.showTotal,k=r.simple,N=r.itemRender,J=r.showPrevNextJumpers,$=r.jumpPrevIcon,B=r.jumpNextIcon,F=r.selectComponentClass,W=r.selectPrefixCls,V=r.pageSizeOptions,z=this.state,b=z.current,M=z.pageSize,Oe=z.currentInputValue;if(h===!0&&d<=M)return null;var C=R(void 0,this.state,this.props),y=[],re=null,ae=null,ie=null,se=null,D=null,U=f&&f.goButton,I=v?1:2,oe=b-1>0?b-1:0,le=b+1<C?b+1:C,ce=Object.keys(this.props).reduce(function(de,A){return(A.substr(0,5)==="data-"||A.substr(0,5)==="aria-"||A==="role")&&(de[A]=e.props[A]),de},{});if(k)return U&&(typeof U=="boolean"?D=o("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO,children:u.jump_to_confirm}):D=o("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO,children:U}),D=o("li",{title:m?"".concat(u.jump_to).concat(b,"/").concat(C):null,className:"".concat(s,"-simple-pager"),children:D})),x("ul",j(w({className:O(s,"".concat(s,"-simple"),P({},"".concat(s,"-disabled"),i),l),style:p,ref:this.savePaginationNode},ce),{children:[o("li",{title:m?u.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:O("".concat(s,"-prev"),P({},"".concat(s,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev(),children:this.renderPrev(oe)}),x("li",{title:m?"".concat(b,"/").concat(C):null,className:"".concat(s,"-simple-pager"),children:[o("input",{type:"text",value:Oe,disabled:i,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:"3"}),o("span",{className:"".concat(s,"-slash"),children:"/"}),C]}),o("li",{title:m?u.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:O("".concat(s,"-next"),P({},"".concat(s,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext(),children:this.renderNext(le)}),D]}));if(C<=3+I*2){var ue={locale:u,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:m,itemRender:N};C||y.push(g.exports.createElement(L,j(w({},ue),{key:"noPager",page:1,className:"".concat(s,"-item-disabled")})));for(var Q=1;Q<=C;Q+=1){var ke=b===Q;y.push(g.exports.createElement(L,j(w({},ue),{key:Q,page:Q,active:ke})))}}else{var we=v?u.prev_3:u.prev_5,Ee=v?u.next_3:u.next_5;J&&(re=o("li",{title:m?we:null,onClick:this.jumpPrev,tabIndex:"0",onKeyPress:this.runIfEnterJumpPrev,className:O("".concat(s,"-jump-prev"),P({},"".concat(s,"-jump-prev-custom-icon"),!!$)),children:N(this.getJumpPrevPage(),"jump-prev",this.getItemIcon($,"prev page"))},"prev"),ae=o("li",{title:m?Ee:null,tabIndex:"0",onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:O("".concat(s,"-jump-next"),P({},"".concat(s,"-jump-next-custom-icon"),!!B)),children:N(this.getJumpNextPage(),"jump-next",this.getItemIcon(B,"next page"))},"next")),se=o(L,{locale:u,last:!0,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,page:C,active:!1,showTitle:m,itemRender:N},C),ie=o(L,{locale:u,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,page:1,active:!1,showTitle:m,itemRender:N},1);var G=Math.max(1,b-I),H=Math.min(b+I,C);b-1<=I&&(H=1+I*2),C-b<=I&&(G=C-I*2);for(var K=G;K<=H;K+=1){var Re=b===K;y.push(o(L,{locale:u,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,page:K,active:Re,showTitle:m,itemRender:N},K))}b-1>=I*2&&b!==1+2&&(y[0]=g.exports.cloneElement(y[0],{className:"".concat(s,"-item-after-jump-prev")}),y.unshift(re)),C-b>=I*2&&b!==C-2&&(y[y.length-1]=g.exports.cloneElement(y[y.length-1],{className:"".concat(s,"-item-before-jump-next")}),y.push(ae)),G!==1&&y.unshift(ie),H!==C&&y.push(se)}var pe=null;_&&(pe=o("li",{className:"".concat(s,"-total-text"),children:_(d,[d===0?0:(b-1)*M+1,b*M>d?d:b*M])}));var Y=!this.hasPrev()||!C,Z=!this.hasNext()||!C;return x("ul",j(w({className:O(s,l,P({},"".concat(s,"-disabled"),i)),style:p,unselectable:"unselectable",ref:this.savePaginationNode},ce),{children:[pe,o("li",{title:m?u.prev_page:null,onClick:this.prev,tabIndex:Y?null:0,onKeyPress:this.runIfEnterPrev,className:O("".concat(s,"-prev"),P({},"".concat(s,"-disabled"),Y)),"aria-disabled":Y,children:this.renderPrev(oe)}),y,o("li",{title:m?u.next_page:null,onClick:this.next,tabIndex:Z?null:0,onKeyPress:this.runIfEnterNext,className:O("".concat(s,"-next"),P({},"".concat(s,"-disabled"),Z)),"aria-disabled":Z,children:this.renderNext(le)}),o(Se,{disabled:i,locale:u,rootPrefixCls:s,selectComponentClass:F,selectPrefixCls:W,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:b,pageSize:M,pageSizeOptions:V,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:U})]}))}}],[{key:"getDerivedStateFromProps",value:function(e,r){var s={};if("current"in e&&(s.current=e.current,e.current!==r.current&&(s.currentInputValue=s.current)),"pageSize"in e&&e.pageSize!==r.pageSize){var l=r.current,p=R(e.pageSize,r,e);l=l>p?p:l,"current"in e||(s.current=l,s.currentInputValue=l),s.pageSize=e.pageSize}return s}}]),c}(S.Component);Ne.defaultProps={defaultCurrent:1,total:0,defaultPageSize:10,onChange:te,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:te,locale:Fe,style:{},itemRender:Ue,totalBoundaryShowSizeChanger:50};const qe=({option:t,index:n,position:c,analytics:a})=>o("div",{children:o("p",{children:x("label",{children:[o("input",{type:"checkbox",className:"filled-in",disabled:!0,checked:t.isCorrect,name:`options_${c}`}),o("span",{className:t.isCorrect?"green-text":"black-text",children:o("b",{children:o("span",{dangerouslySetInnerHTML:{__html:t.option}})})})]})})},n),We=({option:t,index:n,position:c,analytics:a})=>o("div",{children:o("p",{children:x("label",{children:[o("input",{disabled:!0,required:!0,checked:t.isCorrect,className:"with-gap",name:`options_${c}`,type:"radio"}),o("span",{className:t.isCorrect?"green-text":"black-text",children:o("b",{children:o("span",{dangerouslySetInnerHTML:{__html:`
                                <div>${t.option}</div>
                                <div class="sub-modal-texts ${t.isCorrect?"green-text":"red-text"}">Selected by (${a}%) of the students</div>
                                `}})})})]})})},n),Ge=({question:t,failed:n,students:c,position:a,choices:e,paperName:r,questionPosition:s})=>{const l=E(ee),i=g.exports.useMemo(()=>{var u,f;return((f=(u=t==null?void 0:t.options_next)==null?void 0:u.filter(v=>v.isCorrect))==null?void 0:f.length)||0},[t])>1||!1;g.exports.useEffect(()=>{let u=document.querySelectorAll(".question-comp img");xe.Materialbox.init(u)},[]);const d=(()=>{let u=i?qe:We;return({index:f,option:v,analytics:m})=>o(u,{analytics:m,position:f+1,option:v,index:f},f)})();return x("div",{children:[r&&s&&s>0?o("div",{className:"center",style:{marginTop:"8px"},children:x("span",{className:"sub-modal-texts teal-text",style:{border:"1px solid #d3d3d3",padding:"5px 15px",cursor:"pointer"},children:[" ",x("b",{children:[r," | Number ",s]})," "]})}):null,o("span",{dangerouslySetInnerHTML:{__html:`
                    <div style="display:flex;flex-direction:row;align-items:flex-start;">
                        <p style="margin-right:5px;">${a}.  </p>
                        <div>
                            <strong class="question-comp">${t.question}</strong>
                            <span class="sub-modal-texts green-text" style="margin-left:5px;">
                                <b>[ Attempted by ${c} (${(c/(l||1)*100).toFixed(0)}%) student(s) ]</b>
                            </span>

                            <span class="sub-modal-texts red-text" style="margin-left:5px;">
                                <b>[ Failed by ${(n/c*100).toFixed(0)}% of the students ]</b>
                            </span>
                        </div>
                    </div>
                `}}),o("div",{style:{marginTop:"10px",marginLeft:"17px",marginBottom:"10px"},children:t.options_next&&t.options_next.map((u,f)=>{let v=Object.keys(e).find(m=>m===u._id);return d({option:u,index:f,analytics:((v&&e[u._id]||0)/c*100).toFixed(0)})})}),o("div",{style:{marginLeft:"17px",marginBottom:"10px"},children:o("span",{dangerouslySetInnerHTML:{__html:`
                        <blockquote class="red lighten-5">
                            <span>
                            ${t.additionalInfo}
                            </span>
                        </blockquote>
                    `}})})]})};const He=({option:t,index:n,position:c,optionAnalytics:a})=>o("div",{children:o("p",{children:x("label",{children:[o("input",{type:"checkbox",checked:t.isCorrect,className:"filled-in",disabled:!0,required:!0,name:`sub_option_answer_${c}`}),o("span",{className:t.isCorrect?"green-text":"black-text",children:o("b",{children:o("span",{dangerouslySetInnerHTML:{__html:`
                                        <div>${t.option}</div>
                                        <div class="sub-modal-texts ${t.isCorrect?"green-text":"red-text"}">Selected by (${a.toFixed(0)}%) of the students</div>
                                    `}})})})]})})},n),Ye=({option:t,keyValue:n,position:c,optionAnalytics:a})=>o("p",{children:x("label",{children:[o("input",{disabled:!0,checked:t.isCorrect,required:!0,className:"with-gap",type:"radio",name:`sub_option_answer_${c}`}),o("span",{className:t.isCorrect?"green-text":"black-text",children:o("b",{children:o("span",{dangerouslySetInnerHTML:{__html:`
                                    <div>${t.option}</div>
                                    <div class="sub-modal-texts ${t.isCorrect?"green-text":"red-text"}">Selected by (${a.toFixed(0)}%) of the students</div>
                                    `}})})})]})},n),Ze=({children:t,index:n})=>x("div",{style:{marginLeft:"15px",marginTop:"5px",marginBottom:"5px",display:"flex",flexDirection:"row",alignItems:"flex-start"},children:[x("p",{children:[n+1,"."]}),o("div",{children:t})]}),Xe=({children:t})=>o("div",{style:{marginLeft:"15px",marginTop:"5px",marginBottom:"5px"},children:t}),et=({question:t,index:n,savedState:c,parentId:a})=>{const e=E(Ie),r=E(_e),s=E(ee),l=g.exports.useMemo(()=>{var u,f;return((f=(u=t==null?void 0:t.options)==null?void 0:u.filter(v=>v.isCorrect))==null?void 0:f.length)>1},[t]),p=r?Ze:Xe,i=g.exports.useMemo(()=>e.find(u=>u.questionId===t._id)||{},[e,t]),d=(()=>{let u=l?He:Ye;return({position:f,index:v,option:m,quesIndex:_,optionAnalytics:k})=>o(u,{keyValue:`sub_option_${v}_${_}`,position:f,option:m,index:v,optionAnalytics:k},`sub_option_${v}_${_}`)})();return x("div",{style:{marginLeft:"6px"},children:[o("span",{dangerouslySetInnerHTML:{__html:r?"":`
                        <div style="display:flex;flex-direction:row;">
                            <p style="margin-right:5px;">
                                ${n+1}.  
                            </p>
                            <p><strong>
                            ${t.question}
                            </strong></p>
                        </div>
                    `}}),x(p,{index:n,children:[t.options.map((u,f)=>{let v=Object.keys(i).length?i.choices[u._id]/(i.students||1)*100:0;return d({position:n,index:n,quesIndex:f,option:u,optionAnalytics:v||0})}),x("div",{style:{letterSpacing:"1px",display:"flex",flexDirection:"row",alignItems:"center"},className:"sub-modal-texts blue-text",children:[o("i",{className:"material-icons",children:"info"})," ",x("b",{style:{marginLeft:"4px"},children:["Attempted by ",i.students," ( ",((i.students||0)/(s||1)*100).toFixed(0)," %) of the learners"]})]})]}),o("div",{style:{marginLeft:"15px",marginBottom:"10px"},children:o("span",{dangerouslySetInnerHTML:{__html:`
                        <blockquote class="red lighten-5">
                            <span>
                                ${t.additionalInfo}
                            </span>
                        </blockquote>
                    `}})})]})},tt=t=>{let n=5,c=t.length%n,a=Math.floor(t.length/n)+(c>0?1:0),e=new Array(a).fill([]);for(let r=0;r<a;r++)e[r]=t.slice(r*n,r*n+n);return e},nt=S.memo(({parentId:t,sub_questions:n,savedChildren:c})=>{const a=E(ne),e=g.exports.useCallback(p=>c.find(i=>i.question===p)||null,[n]);let r=g.exports.useMemo(()=>tt(n||[]),[n]),s=r[a],l=r.slice(0,a).reduce((p,i)=>p+i.length,0);return o(De,{children:s.map((p,i)=>o(et,{parentId:t,question:p,savedState:e(p._id),index:i+l},i))})}),_e=X({key:"isBrokenPassageId",default:!1}),Ie=X({key:"subQuestionsContextStateId",default:[]}),rt=({question:t,failed:n,students:c,children_stats:a,paperName:e,questionPosition:r})=>{const s=be(_e),l=be(Ie);E(Qe);const[p,i]=g.exports.useState([]),[h,d]=g.exports.useState(t.question),[u,f]=g.exports.useState(-1),v=E(ne),m=E(ee);return g.exports.useEffect(()=>{let _=document.querySelectorAll(".question-comp img");xe.Materialbox.init(_)},[]),g.exports.useEffect(()=>{f(Math.random())},[v]),g.exports.useEffect(()=>{a.length&&l(a)},[a]),g.exports.useEffect(()=>{s(t.children[0].question.trim().replace(/(<([^>]+)>)/ig,"").trim().length<=1)},[t]),x("div",{children:[e&&r&&r>0?o("div",{className:"center",style:{marginTop:"8px"},children:x("span",{className:"sub-modal-texts teal-text",style:{border:"1px solid #d3d3d3",padding:"5px 15px",cursor:"pointer"},children:[" ",x("b",{children:[e," | Number ",r]})," "]})}):null,o("span",{dangerouslySetInnerHTML:{__html:`
                    <div>
                        <div>
                            <span class="sub-modal-texts green-text" style="margin-left:5px;">
                                <b>[ Attempted by ${c} (${(c/(m||1)*100).toFixed(0)}%) student(s) ]</b>
                            </span>
                        </div>
                        <div class="question-comp">${h}</div>
                    </div>`}}),o("div",{style:{marginTop:"5px"},children:o(nt,{parentId:t._id,savedChildren:p,sub_questions:t.children||[]},u)})]})},at=t=>{if(!t.question)return null;switch(t.question.questionType){case"normal":return o(Ge,w({},t));case"comprehension":return o(rt,w({},t));default:return null}},ne=X({key:"compSubQuestionPageId",default:0}),ut=({stats:t})=>{const[n,c]=g.exports.useState(0),[a,e]=g.exports.useState(-1),[r,s]=Me(ne),[l,p]=g.exports.useState({});g.exports.useEffect(()=>{t.length&&(s(0),p(t[n]),e(Math.random()))},[n]);const i=g.exports.useMemo(()=>l.question&&l.question.questionType==="comprehension"?Math.floor((l.question?(l.question.children||[]).length:0)/5)+((l.question?(l.question.children||[]).length:0)%5>0?1:0):0,[l]);return x("div",{children:[o("div",{className:"row",children:o("div",{className:"col s12 left-align",children:t.length?o(Ne,{onChange:(h,d)=>{c(h-1)},current:n+1,total:t.length,pageSize:1}):null})}),l.question&&l.question.questionType==="comprehension"&&i>1?o("div",{style:{border:"1px solid #d3d3d3",marginBottom:"5px",borderRadius:"2px",padding:"5px 6px",position:"sticky",top:64,zIndex:2},children:x("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[o("button",{disabled:r===0,className:"waves-effect waves-light btn-small z-depth-0",onClick:h=>{s(d=>d>0?d-1:d)},children:o("i",{className:"material-icons",children:"arrow_back"})}),o("button",{className:"waves-effect waves-light btn-small z-depth-0",disabled:r>=i-1,onClick:h=>{s(d=>d+1)},children:o("i",{className:"material-icons",children:"arrow_forward"})})]})}):null,o("div",{className:"col s12",style:{border:"1px solid #d3d3d3"},children:t.length>n?o(at,j(w({},l),{position:n+1}),a):o("p",{className:"center",children:"No questions found"})})]})};export{ne as compSubQuestionPageState,ut as default};
