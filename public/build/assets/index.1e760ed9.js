var ze=Object.defineProperty,Te=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var fe=(t,n,c)=>n in t?ze(t,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[n]=c,k=(t,n)=>{for(var c in n||(n={}))$e.call(n,c)&&fe(t,c,n[c]);if(he)for(var c of he(n))Be.call(n,c)&&fe(t,c,n[c]);return t},j=(t,n)=>Te(t,je(n));import{_ as P,D as Ve,E as I,F as ge,H as me,I as ve,R as w,M as xe,y as X,m as be,J as Me}from"./App.52256198.js";import{R as S,a as f}from"./vendor.0b632b43.js";import{j as l,a as b,F as De}from"./index.c139cc82.js";import{totalStudentsInSubject as ee,studentsWhoPartcipatedState as Qe}from"./TopFailedQuestions.b4ab106d.js";function Ce(t,n){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),c.push.apply(c,a)}return c}function Ke(t){for(var n=1;n<arguments.length;n++){var c=arguments[n]!=null?arguments[n]:{};n%2?Ce(Object(c),!0).forEach(function(a){P(t,a,c[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):Ce(Object(c)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(c,a))})}return t}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},U(t)}function Ae(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Le(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Je(t,n){if(n&&(Ve(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Le(t)}function ye(t){var n=Ae();return function(){var a=U(t),e;if(n){var r=U(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return Je(this,e)}}var L=function(n){var c,a="".concat(n.rootPrefixCls,"-item"),e=I(a,"".concat(a,"-").concat(n.page),(c={},P(c,"".concat(a,"-active"),n.active),P(c,"".concat(a,"-disabled"),!n.page),P(c,n.className,!!n.className),c)),r=function(){n.onClick(n.page)},s=function(d){n.onKeyPress(d,n.onClick,n.page)};return S.createElement("li",{title:n.showTitle?n.page:null,className:e,onClick:r,onKeyPress:s,tabIndex:"0"},n.itemRender(n.page,"page",S.createElement("a",{rel:"nofollow"},n.page)))},T={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40},Se=function(t){ge(c,t);var n=ye(c);function c(){var a;me(this,c);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return a=n.call.apply(n,[this].concat(r)),a.state={goInputText:""},a.buildOptionText=function(o){return"".concat(o," ").concat(a.props.locale.items_per_page)},a.changeSize=function(o){a.props.changeSize(Number(o))},a.handleChange=function(o){a.setState({goInputText:o.target.value})},a.handleBlur=function(o){var d=a.props,i=d.goButton,p=d.quickGo,u=d.rootPrefixCls,h=a.state.goInputText;i||h===""||(a.setState({goInputText:""}),!(o.relatedTarget&&(o.relatedTarget.className.indexOf("".concat(u,"-item-link"))>=0||o.relatedTarget.className.indexOf("".concat(u,"-item"))>=0))&&p(a.getValidValue()))},a.go=function(o){var d=a.state.goInputText;d!==""&&(o.keyCode===T.ENTER||o.type==="click")&&(a.setState({goInputText:""}),a.props.quickGo(a.getValidValue()))},a}return ve(c,[{key:"getValidValue",value:function(){var e=this.state.goInputText;return!e||isNaN(e)?void 0:Number(e)}},{key:"getPageSizeOptions",value:function(){var e=this.props,r=e.pageSize,s=e.pageSizeOptions;return s.some(function(o){return o.toString()===r.toString()})?s:s.concat([r.toString()]).sort(function(o,d){var i=isNaN(Number(o))?0:Number(o),p=isNaN(Number(d))?0:Number(d);return i-p})}},{key:"render",value:function(){var e=this,r=this.props,s=r.pageSize,o=r.locale,d=r.rootPrefixCls,i=r.changeSize,p=r.quickGo,u=r.goButton,h=r.selectComponentClass,g=r.buildOptionText,C=r.selectPrefixCls,v=r.disabled,R=this.state.goInputText,O="".concat(d,"-options"),N=h,J=null,$=null,B=null;if(!i&&!p)return null;var q=this.getPageSizeOptions();if(i&&N){var W=q.map(function(V,z){return S.createElement(N.Option,{key:z,value:V.toString()},(g||e.buildOptionText)(V))});J=S.createElement(N,{disabled:v,prefixCls:C,showSearch:!1,className:"".concat(O,"-size-changer"),optionLabelProp:"children",dropdownMatchSelectWidth:!1,value:(s||q[0]).toString(),onChange:this.changeSize,getPopupContainer:function(z){return z.parentNode},"aria-label":o.page_size,defaultOpen:!1},W)}return p&&(u&&(B=typeof u=="boolean"?S.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:v,className:"".concat(O,"-quick-jumper-button")},o.jump_to_confirm):S.createElement("span",{onClick:this.go,onKeyUp:this.go},u)),$=S.createElement("div",{className:"".concat(O,"-quick-jumper")},o.jump_to,S.createElement("input",{disabled:v,type:"text",value:R,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":o.page}),o.page,B)),S.createElement("li",{className:"".concat(O)},J,$)}}]),c}(S.Component);Se.defaultProps={pageSizeOptions:["10","20","50","100"]};var qe={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"};function te(){}function Pe(t){var n=Number(t);return typeof n=="number"&&!isNaN(n)&&isFinite(n)&&Math.floor(n)===n}function Fe(t,n,c){return c}function E(t,n,c){var a=typeof t=="undefined"?n.pageSize:t;return Math.floor((c.total-1)/a)+1}var Ne=function(t){ge(c,t);var n=ye(c);function c(a){var e;me(this,c),e=n.call(this,a),e.getJumpPrevPage=function(){return Math.max(1,e.state.current-(e.props.showLessItems?3:5))},e.getJumpNextPage=function(){return Math.min(E(void 0,e.state,e.props),e.state.current+(e.props.showLessItems?3:5))},e.getItemIcon=function(i,p){var u=e.props.prefixCls,h=i||l("button",{type:"button","aria-label":p,className:"".concat(u,"-item-link")});return typeof i=="function"&&(h=S.createElement(i,Ke({},e.props))),h},e.savePaginationNode=function(i){e.paginationNode=i},e.isValid=function(i){var p=e.props.total;return Pe(i)&&i!==e.state.current&&Pe(p)&&p>0},e.shouldDisplayQuickJumper=function(){var i=e.props,p=i.showQuickJumper,u=i.total,h=e.state.pageSize;return u<=h?!1:p},e.handleKeyDown=function(i){(i.keyCode===T.ARROW_UP||i.keyCode===T.ARROW_DOWN)&&i.preventDefault()},e.handleKeyUp=function(i){var p=e.getValidValue(i),u=e.state.currentInputValue;p!==u&&e.setState({currentInputValue:p}),i.keyCode===T.ENTER?e.handleChange(p):i.keyCode===T.ARROW_UP?e.handleChange(p-1):i.keyCode===T.ARROW_DOWN&&e.handleChange(p+1)},e.handleBlur=function(i){var p=e.getValidValue(i);e.handleChange(p)},e.changePageSize=function(i){var p=e.state.current,u=E(i,e.state,e.props);p=p>u?u:p,u===0&&(p=e.state.current),typeof i=="number"&&("pageSize"in e.props||e.setState({pageSize:i}),"current"in e.props||e.setState({current:p,currentInputValue:p})),e.props.onShowSizeChange(p,i),"onChange"in e.props&&e.props.onChange&&e.props.onChange(p,i)},e.handleChange=function(i){var p=e.props.disabled,u=i;if(e.isValid(u)&&!p){var h=E(void 0,e.state,e.props);u>h?u=h:u<1&&(u=1),"current"in e.props||e.setState({current:u,currentInputValue:u});var g=e.state.pageSize;return e.props.onChange(u,g),u}return e.state.current},e.prev=function(){e.hasPrev()&&e.handleChange(e.state.current-1)},e.next=function(){e.hasNext()&&e.handleChange(e.state.current+1)},e.jumpPrev=function(){e.handleChange(e.getJumpPrevPage())},e.jumpNext=function(){e.handleChange(e.getJumpNextPage())},e.hasPrev=function(){return e.state.current>1},e.hasNext=function(){return e.state.current<E(void 0,e.state,e.props)},e.runIfEnter=function(i,p){if(i.key==="Enter"||i.charCode===13){for(var u=arguments.length,h=new Array(u>2?u-2:0),g=2;g<u;g++)h[g-2]=arguments[g];p.apply(void 0,h)}},e.runIfEnterPrev=function(i){e.runIfEnter(i,e.prev)},e.runIfEnterNext=function(i){e.runIfEnter(i,e.next)},e.runIfEnterJumpPrev=function(i){e.runIfEnter(i,e.jumpPrev)},e.runIfEnterJumpNext=function(i){e.runIfEnter(i,e.jumpNext)},e.handleGoTO=function(i){(i.keyCode===T.ENTER||i.type==="click")&&e.handleChange(e.state.currentInputValue)};var r=a.onChange!==te,s="current"in a;s&&!r&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var o=a.defaultCurrent;"current"in a&&(o=a.current);var d=a.defaultPageSize;return"pageSize"in a&&(d=a.pageSize),o=Math.min(o,E(d,void 0,a)),e.state={current:o,currentInputValue:o,pageSize:d},e}return ve(c,[{key:"componentDidUpdate",value:function(e,r){var s=this.props.prefixCls;if(r.current!==this.state.current&&this.paginationNode){var o=this.paginationNode.querySelector(".".concat(s,"-item-").concat(r.current));o&&document.activeElement===o&&o.blur()}}},{key:"getValidValue",value:function(e){var r=e.target.value,s=E(void 0,this.state,this.props),o=this.state.currentInputValue,d;return r===""?d=r:isNaN(Number(r))?d=o:r>=s?d=s:d=Number(r),d}},{key:"getShowSizeChanger",value:function(){var e=this.props,r=e.showSizeChanger,s=e.total,o=e.totalBoundaryShowSizeChanger;return typeof r!="undefined"?r:s>o}},{key:"renderPrev",value:function(e){var r=this.props,s=r.prevIcon,o=r.itemRender,d=o(e,"prev",this.getItemIcon(s,"prev page")),i=!this.hasPrev();return f.exports.isValidElement(d)?f.exports.cloneElement(d,{disabled:i}):d}},{key:"renderNext",value:function(e){var r=this.props,s=r.nextIcon,o=r.itemRender,d=o(e,"next",this.getItemIcon(s,"next page")),i=!this.hasNext();return f.exports.isValidElement(d)?f.exports.cloneElement(d,{disabled:i}):d}},{key:"render",value:function(){var e=this,r=this.props,s=r.prefixCls,o=r.className,d=r.style,i=r.disabled,p=r.hideOnSinglePage,u=r.total,h=r.locale,g=r.showQuickJumper,C=r.showLessItems,v=r.showTitle,R=r.showTotal,O=r.simple,N=r.itemRender,J=r.showPrevNextJumpers,$=r.jumpPrevIcon,B=r.jumpNextIcon,q=r.selectComponentClass,W=r.selectPrefixCls,V=r.pageSizeOptions,z=this.state,m=z.current,M=z.pageSize,Oe=z.currentInputValue;if(p===!0&&u<=M)return null;var x=E(void 0,this.state,this.props),y=[],re=null,ae=null,ie=null,se=null,D=null,F=g&&g.goButton,_=C?1:2,oe=m-1>0?m-1:0,le=m+1<x?m+1:x,ce=Object.keys(this.props).reduce(function(de,A){return(A.substr(0,5)==="data-"||A.substr(0,5)==="aria-"||A==="role")&&(de[A]=e.props[A]),de},{});if(O)return F&&(typeof F=="boolean"?D=l("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO,children:h.jump_to_confirm}):D=l("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO,children:F}),D=l("li",{title:v?"".concat(h.jump_to).concat(m,"/").concat(x):null,className:"".concat(s,"-simple-pager"),children:D})),b("ul",j(k({className:I(s,"".concat(s,"-simple"),P({},"".concat(s,"-disabled"),i),o),style:d,ref:this.savePaginationNode},ce),{children:[l("li",{title:v?h.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:I("".concat(s,"-prev"),P({},"".concat(s,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev(),children:this.renderPrev(oe)}),b("li",{title:v?"".concat(m,"/").concat(x):null,className:"".concat(s,"-simple-pager"),children:[l("input",{type:"text",value:Oe,disabled:i,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:"3"}),l("span",{className:"".concat(s,"-slash"),children:"/"}),x]}),l("li",{title:v?h.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:I("".concat(s,"-next"),P({},"".concat(s,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext(),children:this.renderNext(le)}),D]}));if(x<=3+_*2){var ue={locale:h,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:v,itemRender:N};x||y.push(f.exports.createElement(L,j(k({},ue),{key:"noPager",page:1,className:"".concat(s,"-item-disabled")})));for(var Q=1;Q<=x;Q+=1){var ke=m===Q;y.push(f.exports.createElement(L,j(k({},ue),{key:Q,page:Q,active:ke})))}}else{var we=C?h.prev_3:h.prev_5,Ee=C?h.next_3:h.next_5;J&&(re=l("li",{title:v?we:null,onClick:this.jumpPrev,tabIndex:"0",onKeyPress:this.runIfEnterJumpPrev,className:I("".concat(s,"-jump-prev"),P({},"".concat(s,"-jump-prev-custom-icon"),!!$)),children:N(this.getJumpPrevPage(),"jump-prev",this.getItemIcon($,"prev page"))},"prev"),ae=l("li",{title:v?Ee:null,tabIndex:"0",onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:I("".concat(s,"-jump-next"),P({},"".concat(s,"-jump-next-custom-icon"),!!B)),children:N(this.getJumpNextPage(),"jump-next",this.getItemIcon(B,"next page"))},"next")),se=l(L,{locale:h,last:!0,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,page:x,active:!1,showTitle:v,itemRender:N},x),ie=l(L,{locale:h,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,page:1,active:!1,showTitle:v,itemRender:N},1);var G=Math.max(1,m-_),H=Math.min(m+_,x);m-1<=_&&(H=1+_*2),x-m<=_&&(G=x-_*2);for(var K=G;K<=H;K+=1){var Re=m===K;y.push(l(L,{locale:h,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,page:K,active:Re,showTitle:v,itemRender:N},K))}m-1>=_*2&&m!==1+2&&(y[0]=f.exports.cloneElement(y[0],{className:"".concat(s,"-item-after-jump-prev")}),y.unshift(re)),x-m>=_*2&&m!==x-2&&(y[y.length-1]=f.exports.cloneElement(y[y.length-1],{className:"".concat(s,"-item-before-jump-next")}),y.push(ae)),G!==1&&y.unshift(ie),H!==x&&y.push(se)}var pe=null;R&&(pe=l("li",{className:"".concat(s,"-total-text"),children:R(u,[u===0?0:(m-1)*M+1,m*M>u?u:m*M])}));var Y=!this.hasPrev()||!x,Z=!this.hasNext()||!x;return b("ul",j(k({className:I(s,o,P({},"".concat(s,"-disabled"),i)),style:d,unselectable:"unselectable",ref:this.savePaginationNode},ce),{children:[pe,l("li",{title:v?h.prev_page:null,onClick:this.prev,tabIndex:Y?null:0,onKeyPress:this.runIfEnterPrev,className:I("".concat(s,"-prev"),P({},"".concat(s,"-disabled"),Y)),"aria-disabled":Y,children:this.renderPrev(oe)}),y,l("li",{title:v?h.next_page:null,onClick:this.next,tabIndex:Z?null:0,onKeyPress:this.runIfEnterNext,className:I("".concat(s,"-next"),P({},"".concat(s,"-disabled"),Z)),"aria-disabled":Z,children:this.renderNext(le)}),l(Se,{disabled:i,locale:h,rootPrefixCls:s,selectComponentClass:q,selectPrefixCls:W,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:m,pageSize:M,pageSizeOptions:V,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:F})]}))}}],[{key:"getDerivedStateFromProps",value:function(e,r){var s={};if("current"in e&&(s.current=e.current,e.current!==r.current&&(s.currentInputValue=s.current)),"pageSize"in e&&e.pageSize!==r.pageSize){var o=r.current,d=E(e.pageSize,r,e);o=o>d?d:o,"current"in e||(s.current=o,s.currentInputValue=o),s.pageSize=e.pageSize}return s}}]),c}(S.Component);Ne.defaultProps={defaultCurrent:1,total:0,defaultPageSize:10,onChange:te,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:te,locale:qe,style:{},itemRender:Fe,totalBoundaryShowSizeChanger:50};const Ue=({option:t,index:n,position:c,analytics:a})=>l("div",{children:l("p",{children:b("label",{children:[l("input",{type:"checkbox",className:"filled-in",disabled:!0,checked:t.isCorrect,name:`options_${c}`}),l("span",{className:t.isCorrect?"green-text":"black-text",children:l("b",{children:l("span",{dangerouslySetInnerHTML:{__html:t.option}})})})]})})},n),We=({option:t,index:n,position:c,analytics:a})=>l("div",{children:l("p",{children:b("label",{children:[l("input",{disabled:!0,required:!0,checked:t.isCorrect,className:"with-gap",name:`options_${c}`,type:"radio"}),l("span",{className:t.isCorrect?"green-text":"black-text",children:l("b",{children:l("span",{dangerouslySetInnerHTML:{__html:`
                                <div>${t.option}</div>
                                <div class="sub-modal-texts ${t.isCorrect?"green-text":"red-text"}">Selected by (${a}%) of the students</div>
                                `}})})})]})})},n),Ge=({question:t,failed:n,students:c,position:a,choices:e})=>{const r=w(ee),o=f.exports.useMemo(()=>{var p,u;return((u=(p=t==null?void 0:t.options_next)==null?void 0:p.filter(h=>h.isCorrect))==null?void 0:u.length)||0},[t])>1||!1;f.exports.useEffect(()=>{let p=document.querySelectorAll(".question-comp img");xe.Materialbox.init(p)},[]);const i=(()=>{let p=o?Ue:We;return({index:u,option:h,analytics:g})=>l(p,{analytics:g,position:u+1,option:h,index:u},u)})();return b("div",{children:[l("span",{dangerouslySetInnerHTML:{__html:`
                    <div style="display:flex;flex-direction:row;align-items:flex-start;">
                        <p style="margin-right:5px;">${a}.  </p>
                        <div>
                            <strong class="question-comp">${t.question}</strong>
                            <span class="sub-modal-texts green-text" style="margin-left:5px;">
                                <b>[ Attempted by ${c} (${(c/(r||1)*100).toFixed(0)}%) student(s) ]</b>
                            </span>

                            <span class="sub-modal-texts red-text" style="margin-left:5px;">
                                <b>[ Failed by ${(n/c*100).toFixed(0)}% of the students ]</b>
                            </span>
                        </div>
                    </div>
                `}}),l("div",{style:{marginTop:"10px",marginLeft:"17px",marginBottom:"10px"},children:t.options_next&&t.options_next.map((p,u)=>{let h=Object.keys(e).find(g=>g===p._id);return i({option:p,index:u,analytics:((h&&e[p._id]||0)/c*100).toFixed(0)})})}),l("div",{style:{marginLeft:"17px",marginBottom:"10px"},children:l("span",{dangerouslySetInnerHTML:{__html:`
                        <blockquote class="red lighten-5">
                            <span>
                            ${t.additionalInfo}
                            </span>
                        </blockquote>
                    `}})})]})};const He=({option:t,index:n,position:c,optionAnalytics:a})=>l("div",{children:l("p",{children:b("label",{children:[l("input",{type:"checkbox",checked:t.isCorrect,className:"filled-in",disabled:!0,required:!0,name:`sub_option_answer_${c}`}),l("span",{className:t.isCorrect?"green-text":"black-text",children:l("b",{children:l("span",{dangerouslySetInnerHTML:{__html:`
                                        <div>${t.option}</div>
                                        <div class="sub-modal-texts ${t.isCorrect?"green-text":"red-text"}">Selected by (${a.toFixed(0)}%) of the students</div>
                                    `}})})})]})})},n),Ye=({option:t,keyValue:n,position:c,optionAnalytics:a})=>l("p",{children:b("label",{children:[l("input",{disabled:!0,checked:t.isCorrect,required:!0,className:"with-gap",type:"radio",name:`sub_option_answer_${c}`}),l("span",{className:t.isCorrect?"green-text":"black-text",children:l("b",{children:l("span",{dangerouslySetInnerHTML:{__html:`
                                    <div>${t.option}</div>
                                    <div class="sub-modal-texts ${t.isCorrect?"green-text":"red-text"}">Selected by (${a.toFixed(0)}%) of the students</div>
                                    `}})})})]})},n),Ze=({children:t,index:n})=>b("div",{style:{marginLeft:"15px",marginTop:"5px",marginBottom:"5px",display:"flex",flexDirection:"row",alignItems:"flex-start"},children:[b("p",{children:[n+1,"."]}),l("div",{children:t})]}),Xe=({children:t})=>l("div",{style:{marginLeft:"15px",marginTop:"5px",marginBottom:"5px"},children:t}),et=({question:t,index:n,savedState:c,parentId:a})=>{const e=w(Ie),r=w(_e),s=w(ee),o=f.exports.useMemo(()=>{var h,g;return((g=(h=t==null?void 0:t.options)==null?void 0:h.filter(C=>C.isCorrect))==null?void 0:g.length)>1},[t]),d=r?Ze:Xe,i=f.exports.useMemo(()=>e.find(h=>h.questionId===t._id)||{},[e,t]),u=(()=>{let h=o?He:Ye;return({position:g,index:C,option:v,quesIndex:R,optionAnalytics:O})=>l(h,{keyValue:`sub_option_${C}_${R}`,position:g,option:v,index:C,optionAnalytics:O},`sub_option_${C}_${R}`)})();return b("div",{style:{marginLeft:"6px"},children:[l("span",{dangerouslySetInnerHTML:{__html:r?"":`
                        <div style="display:flex;flex-direction:row;">
                            <p style="margin-right:5px;">
                                ${n+1}.  
                            </p>
                            <p><strong>
                            ${t.question}
                            </strong></p>
                        </div>
                    `}}),b(d,{index:n,children:[t.options.map((h,g)=>{let C=Object.keys(i).length?i.choices[h._id]/(i.students||1)*100:0;return u({position:n,index:n,quesIndex:g,option:h,optionAnalytics:C||0})}),b("div",{style:{letterSpacing:"1px",display:"flex",flexDirection:"row",alignItems:"center"},className:"sub-modal-texts blue-text",children:[l("i",{className:"material-icons",children:"info"})," ",b("b",{style:{marginLeft:"4px"},children:["Attempted by ",i.students," ( ",((i.students||0)/(s||1)*100).toFixed(0)," %) of the learners"]})]})]}),l("div",{style:{marginLeft:"15px",marginBottom:"10px"},children:l("span",{dangerouslySetInnerHTML:{__html:`
                        <blockquote class="red lighten-5">
                            <span>
                                ${t.additionalInfo}
                            </span>
                        </blockquote>
                    `}})})]})},tt=t=>{let n=5,c=t.length%n,a=Math.floor(t.length/n)+(c>0?1:0),e=new Array(a).fill([]);for(let r=0;r<a;r++)e[r]=t.slice(r*n,r*n+n);return e},nt=S.memo(({parentId:t,sub_questions:n,savedChildren:c})=>{const a=w(ne),e=f.exports.useCallback(d=>c.find(i=>i.question===d)||null,[n]);let r=f.exports.useMemo(()=>tt(n||[]),[n]),s=r[a],o=r.slice(0,a).reduce((d,i)=>d+i.length,0);return l(De,{children:s.map((d,i)=>l(et,{parentId:t,question:d,savedState:e(d._id),index:i+o},i))})}),_e=X({key:"isBrokenPassageId",default:!1}),Ie=X({key:"subQuestionsContextStateId",default:[]}),rt=({question:t,failed:n,students:c,children_stats:a})=>{const e=be(_e),r=be(Ie);w(Qe);const[s,o]=f.exports.useState([]),[d,i]=f.exports.useState(t.question),[p,u]=f.exports.useState(-1),h=w(ne),g=w(ee);return f.exports.useEffect(()=>{let C=document.querySelectorAll(".question-comp img");xe.Materialbox.init(C)},[]),f.exports.useEffect(()=>{u(Math.random())},[h]),f.exports.useEffect(()=>{a.length&&r(a)},[a]),f.exports.useEffect(()=>{e(t.children[0].question.trim().replace(/(<([^>]+)>)/ig,"").trim().length<=1)},[t]),b("div",{children:[l("span",{dangerouslySetInnerHTML:{__html:`
                    <div>
                        <div>
                            <span class="sub-modal-texts green-text" style="margin-left:5px;">
                                <b>[ Attempted by ${c} (${(c/(g||1)*100).toFixed(0)}%) student(s) ]</b>
                            </span>
                        </div>
                        <div class="question-comp">${d}</div>
                    </div>`}}),l("div",{style:{marginTop:"5px"},children:l(nt,{parentId:t._id,savedChildren:s,sub_questions:t.children||[]},p)})]})},at=t=>{if(!t.question)return null;switch(t.question.questionType){case"normal":return l(Ge,k({},t));case"comprehension":return l(rt,k({},t));default:return null}},ne=X({key:"compSubQuestionPageId",default:0}),ut=({stats:t})=>{const[n,c]=f.exports.useState(0),[a,e]=f.exports.useState(-1),[r,s]=Me(ne),[o,d]=f.exports.useState({});f.exports.useEffect(()=>{t.length&&(s(0),d(t[n]),e(Math.random()))},[n]);const i=f.exports.useMemo(()=>o.question&&o.question.questionType==="comprehension"?Math.floor((o.question?(o.question.children||[]).length:0)/5)+((o.question?(o.question.children||[]).length:0)%5>0?1:0):0,[o]);return b("div",{children:[l("div",{className:"row",children:l("div",{className:"col s12 left-align",children:t.length?l(Ne,{onChange:(p,u)=>{c(p-1)},current:n+1,total:t.length,pageSize:1}):null})}),o.question&&o.question.questionType==="comprehension"&&i>1?l("div",{style:{border:"1px solid #d3d3d3",marginBottom:"5px",borderRadius:"2px",padding:"5px 6px",position:"sticky",top:64,zIndex:2},children:b("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[l("button",{disabled:r===0,className:"waves-effect waves-light btn-small z-depth-0",onClick:p=>{s(u=>u>0?u-1:u)},children:l("i",{className:"material-icons",children:"arrow_back"})}),l("button",{className:"waves-effect waves-light btn-small z-depth-0",disabled:r>=i-1,onClick:p=>{s(u=>u+1)},children:l("i",{className:"material-icons",children:"arrow_forward"})})]})}):null,l("div",{className:"col s12",style:{border:"1px solid #d3d3d3"},children:t.length>n?l(at,j(k({},o),{position:n+1}),a):l("p",{className:"center",children:"No questions found"})})]})};export{ne as compSubQuestionPageState,ut as default};
