var y=Object.defineProperty;var g=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var u=(s,a,r)=>a in s?y(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r,x=(s,a)=>{for(var r in a||(a={}))I.call(a,r)&&u(s,r,a[r]);if(g)for(var r of g(a))_.call(a,r)&&u(s,r,a[r]);return s};import{G as C,u as v,d as b,f as R,g as L,t as o}from"./App.7283f78f.js";import{r as l}from"./vendor.fd4def91.js";import{j as e,a as i,F as T}from"./index.3350170c.js";const j=s=>o.success(s,{position:o.POSITION.TOP_RIGHT,autoClose:2e3}),F=s=>o.error(s,{position:o.POSITION.TOP_RIGHT,autoClose:2e3}),S=({_id:s,firstname:a,lastname:r,gender:c})=>{const n=v();return e("div",{className:"col s6 m4",children:e("div",{onClick:p=>n(`/learner/${s}`),className:"hoverable z-depth-1",style:{cursor:"pointer",border:"1px solid #d3d3d3",borderRadius:"2px",padding:"5px",marginBottom:"5px"},children:i("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[e("img",{style:{height:"100px",width:"100px",objectFit:"contain",border:"1px solid #d3d3d3",borderRadius:"50%"},src:"https://cdn2.iconfinder.com/data/icons/child-people-face-avatar-3/500/child_152-512.png"}),e("ul",{style:{paddingLeft:"20px"},children:e("li",{style:{letterSpacing:"1px"},children:i("b",{children:[a," ",r]})})})]})})})},A=({classRefId:s})=>{const{authToken:a,isTeacher:r}=l.exports.useContext(C),c=v(),[n,p]=l.exports.useState([]),[N,w]=l.exports.useState(!1),[h,f]=l.exports.useState("");return l.exports.useEffect(()=>{b.get(`/api/grade/learners/${s}`,{headers:{Authorization:`Bearer ${a}`}}).then(({data:t})=>{if(t){p(t.learners);return}f("Failed to fetch learners")}).catch(t=>{f(t.message)}).finally(()=>{w(!1)})},[]),N?e(R,{}):i(T,{children:[e("div",{className:"row",children:i("div",{className:"col s12",children:[i("button",{disabled:r,className:"waves-effect waves-light btn-flat",style:{marginRight:"5px"},onClick:t=>c("/learner/import"),children:[e("i",{className:"material-icons right",children:"cloud_upload"}),"Import Learners"]}),i("button",{style:{marginRight:"5px"},disabled:r,className:"waves-effect waves-light btn-flat",onClick:t=>c("/learner/new"),children:[e("i",{className:"material-icons right",children:"person_add"}),"Add Learner"]}),i("button",{disabled:!n.length,className:"waves-effect waves-light btn-flat",onClick:t=>{const d=localStorage.getItem("classRefId")||"";b.get(`/api/grade/learners/credentials/${d}`,{headers:{Authorization:`Bearer ${a}`}}).then(async({data:m})=>{if(m){if(await L(m,"credentials.xlsx")){j("Exported leaners credentials successfully!");return}F("Failed to export learners credentials. Please contact zoezi team")}})},children:[e("i",{className:"material-icons right",children:"cloud_download"}),"Export Credentials"]})]})}),h?e("div",{className:"row",children:e("div",{className:"col s12",children:i("div",{className:"sub-modal-texts",style:{borderLeft:"2px solid red",paddingLeft:"5px",paddingRight:"5px",borderRadius:"3px",lineHeight:"4em",backgroundColor:"rgba(255,0,0, 0.1)",display:"flex",flexDirection:"row",alignItems:"center"},children:[e("i",{className:"material-icons left",children:"error_outline"}),e("p",{children:h})]})})}):null,e("div",{className:"row",children:n.map((t,d)=>e(S,x({},t),d))})]})};export{A as default};
