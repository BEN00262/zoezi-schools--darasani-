import{C as w,a as A,L,B as P,p as $,b as j,c as R,G as k,d as m,S as b,e as B}from"./App.00838d4b.js";import{r}from"./vendor.fd4def91.js";import{a as l,j as e}from"./index.67d17a5b.js";w.register(A,L,P,$,j,R);const D=(d,i)=>({indexAxis:i?"y":"x",responsive:!0,maintainAspectRatio:!1,redraw:!0,plugins:{legend:{position:"top"},title:{display:!0,text:d},barValueSpacing:40,tooltips:{displayColors:!0,callbacks:{mode:"x"}},datalabels:{display:u=>!1},scales:{xAxes:[{gridLines:{display:!0,drawBorder:!1}}],yAxes:[{gridLines:{display:!1,drawBorder:!0}}]}}}),F=({subject:d})=>{const{authToken:i}=r.exports.useContext(k),[u,f]=r.exports.useState([]),[x,g]=r.exports.useState([]),[n,v]=r.exports.useState(""),[o,N]=r.exports.useState({firstname:"",lastname:"",profilePic:""}),[c,S]=r.exports.useState({isSpecial:!1,label:"",value:""}),[p,E]=r.exports.useState([]),[h,y]=r.exports.useState({pass:[],fail:[]}),C=!1;return r.exports.useEffect(()=>{const a=localStorage.getItem("classRefId")||"";m.get(`/api/grade/learners/${a}`,{headers:{Authorization:`Bearer ${i}`}}).then(({data:s})=>{if(s){f(s.learners.map(t=>({label:`${t.firstname} ${t.lastname}`,value:t._id})));return}})},[]),r.exports.useEffect(()=>{c.value&&m.get(`/api/analytics/learner/${n}/${c.value}${c.isSpecial?"/special":""}`,{headers:{Authorization:`Bearer ${i}`}}).then(({data:a})=>{if(a){let s=a.plottable;y({pass:s.map(t=>t.score.passed),fail:s.map(t=>t.score.total-t.score.passed)});return}})},[c]),r.exports.useEffect(()=>{if(n){const a=localStorage.getItem("classId")||"";m.get(`/api/analytics/subject/${a}/${n}/${d}`,{headers:{Authorization:`Bearer ${i}`}}).then(({data:s})=>{if(s){N(s.student),g(s.papersDone.map(t=>({label:t.subject,value:t.paperID,isSpecial:t.isSpecial})));return}})}},[n]),l("div",{className:"row",children:[o.firstname?e("div",{className:"col s12 center",children:l("div",{style:{margin:"auto"},children:[e("img",{style:{height:"100px",width:"100px",objectFit:"contain",border:"1px solid #d3d3d3",borderRadius:"50%"},src:o.profilePic?o.profilePic:"https://cdn2.iconfinder.com/data/icons/child-people-face-avatar-3/500/child_152-512.png"}),e("br",{}),e("span",{className:"sub-modal-texts",style:{letterSpacing:"1px"},children:l("b",{children:[o.firstname," ",o.lastname]})})]})}):null,e("div",{className:"col s12 m12 l4",children:e("div",{className:"card z-depth-0",style:{border:"1px solid #dcdee2"},children:l("div",{className:"card-content",children:[l("div",{className:"row",children:[l("div",{className:"col s12 m12",children:[e("label",{children:"Learner"}),e(b,{onChange:a=>{v((a==null?void 0:a.value)||"")},options:u,placeholder:"select learner..."})]}),l("div",{className:"col s12 m12",children:[e("label",{children:"Paper"}),e(b,{options:x,onChange:a=>{S(a||{})},placeholder:"select paper..."})]})]}),e("div",{className:"row",id:"performanceReportButton",hidden:!0,children:e("div",{className:"col s12 m12",children:l("button",{onClick:()=>{},"data-position":"bottom","data-tooltip":"Scroll down to view or download the report",className:"btn-small sub-modal-texts tooltipped white black-text waves-effect waves-black z-depth-1",style:{width:"100%",fontWeight:"bold"},children:["PERFORMANCE REPORT",e("i",{className:"material-icons right",children:"assessment"})]})})})]})})}),e("div",{className:"col s12 m12 l8",children:e("div",{className:"card z-depth-0",style:{border:"1px solid #dcdee2"},children:e("div",{className:"card-content",children:e("div",{className:"row",id:"insertChart",children:e(B,{options:D("Performance Analysis",C),style:{height:"300px"},data:{labels:h.pass.map((a,s)=>`Attempt ${s+1}`),datasets:[{label:"Pass",data:h.pass,backgroundColor:"#00c853"},{label:"Fail",data:h.fail,backgroundColor:"#f44336"}]}})})})})}),p.length?l("div",{className:"col s12 m12",children:[e("h3",{className:"hide-on-small-only",children:e("i",{className:"mdi-content-send brown-text"})}),l("h5",{className:"center sub-sub-headings",children:["Last (",p.length,") paper(s)"]}),e("div",{className:"divider"}),e("div",{className:"section",children:p.map((a,s)=>e("div",{className:"col s6 m3 l2",children:e("div",{className:"hoverable",style:{backgroundColor:"#fffde7",marginBottom:"5px",cursor:"pointer",border:"1px solid #d3d3d3",borderRadius:"2px",padding:"4px"},children:l("div",{className:"center",children:[e("span",{className:"sub-names truncate",children:e("b",{children:a.subject})}),e("br",{}),e("span",{className:"sub-modal-texts teal-text truncate",style:{backgroundColor:"#fff",border:"1px solid #d3d3d3",padding:"4px",borderRadius:"2px"},children:l("b",{children:[a.subject.split(" ")[0].toLocaleLowerCase().includes("kiwahili")?"ALAMA":"SCORE","(",a.score.passed,"/",a.score.total,")"]})})]})})},s))})]}):null]})};export{F as default,D as options};
