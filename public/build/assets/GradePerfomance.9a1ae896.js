import{C as j,a as R,L as T,B as k,p as z,b as G,c as L,u as M,R as O,d as I,e as F,f as h,S as g,g as U}from"./App.fbfe1e5a.js";import{r as s}from"./vendor.c3066ab3.js";import{j as a,a as c}from"./index.e1943286.js";j.register(R,T,k,z,G,L);const Q=(u,f)=>({indexAxis:f?"y":"x",responsive:!0,maintainAspectRatio:!1,redraw:!0,plugins:{legend:{position:"top",display:!1},title:{display:!0,text:u},barValueSpacing:40,tooltips:{displayColors:!0,callbacks:{mode:"x"}},datalabels:{display:o=>!1},scales:{xAxes:[{gridLines:{display:!0,drawBorder:!1}}],yAxes:[{gridLines:{display:!1,drawBorder:!0}}]}}}),Z=({setClassMeanScore:u})=>{const f=!1,{authToken:o}=M(),[_,w]=s.exports.useState([]),[A,B]=s.exports.useState([]),[C,x]=s.exports.useState([]),[r,E]=s.exports.useState({}),[d,v]=s.exports.useState({}),[m,y]=s.exports.useState(""),i=O(I),p="/api/analytics",[n,b]=s.exports.useState([]),P=(e,t,l)=>{h.get(`${p}/${i}/special-paper-analytics/${e}/${t}/${l}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:S})=>b(S||[]))},{data:$,isSuccess:N}=F("in_app_grade_performance_grades",()=>h.get(`${p}/grade/${i}/special_paper_stats`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:e})=>{if(e)return e.map(({grade:t,is_special:l,_id:S})=>({label:`${t}${l?" | special":""}`,value:`${t}${l?"_special":""}`,is_special:l,_id:S}));throw new Error("Unexpected error!")}),{enabled:!!o&&!!i,staleTime:1*60*1e3});return s.exports.useEffect(()=>{N&&$&&w($)},[N]),s.exports.useEffect(()=>{n.length&&u(n.reduce((e,t)=>e+t.performance,0)/n.length)},[n]),s.exports.useEffect(()=>{if(!(Object.keys(r).length<1)){if(b([]),r.is_special){h.get(`${p}/student-but-we-dont-care/${i}/special_paper_stats/${r._id||r.value}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:e})=>{e&&B(e.map(({subType:t,_id:l})=>({value:t,_id:l,label:`${t}s`})))});return}h.get(`${p}/${i}/report_analytics/${r.value}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:e})=>{if(e){b(e||[]);return}})}},[r]),s.exports.useEffect(()=>{Object.keys(d).length>0&&(x([]),h.get(`${p}/student-we-dont-care-about/${i}/special_paper_stats/${r._id||r.value}/${d._id}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:e})=>{e&&x(e.map(({subsubType:t,_id:l})=>({value:t,label:t,_id:l})))}))},[d]),s.exports.useEffect(()=>{m&&P(r.value,d.value,m)},[m]),a("div",{children:c("div",{className:"row",children:[a("div",{className:"col s12 m12 l4",children:a("div",{className:"card z-depth-0",style:{border:"1px solid #dcdee2"},children:c("div",{className:"card-content",children:[a("span",{className:"card-title center",children:a("b",{children:a("small",{children:"PERFORMANCE ANALYSIS"})})}),c("div",{className:"row",children:[c("div",{className:"col s12 m12",children:[a("label",{children:"Select Subscribed Grade"}),a(g,{onChange:e=>{v({}),y(""),E(e||{})},options:_,placeholder:"choose grade..."})]}),c("div",{className:"col s12 m12",hidden:!(r&&r.is_special),children:[a("label",{children:"Select Type"}),a(g,{options:A,onChange:e=>{v(e||{})},placeholder:"choose type..."})]}),c("div",{className:"col s12 m12",hidden:!(d&&d.value),children:[a("label",{children:"Select Paper"}),a(g,{onChange:e=>{y((e==null?void 0:e.value)||"")},options:C,placeholder:"choose paper..."})]})]}),a("div",{className:"row",id:"performanceReportButton",hidden:!0,children:a("div",{className:"col s12 m12",children:c("button",{onClick:()=>{},"data-position":"bottom","data-tooltip":"Scroll down to view or download the report",className:"btn-small sub-modal-texts tooltipped white black-text waves-effect waves-black z-depth-1",style:{width:"100%",fontWeight:"bold"},children:["PERFORMANCE REPORT",a("i",{className:"material-icons right",children:"assessment"})]})})})]})})}),a("div",{className:"col s12 m12 l8",children:a("div",{className:"card z-depth-0",style:{border:"1px solid #dcdee2"},children:a("div",{className:"card-content",children:a("div",{className:"row",id:"insertChart",children:a(U,{options:Q("Subject Mean Score",f),style:{height:"300px"},data:{labels:n.map(e=>e.subject),datasets:[{label:"Subject Mean Score",data:n.map(e=>e.performance),backgroundColor:["#ff1744","#2196f3","#81d4fa","#00897b","#64ffda","#d4e157","#ff9800","#bcaaa4"],hoverBackgroundColor:["#ff1744","#2196f3","#81d4fa","#00897b","#64ffda","#d4e157","#ff9800","#bcaaa4"]}]}})})})})})]})})};export{Z as default,Q as options};
