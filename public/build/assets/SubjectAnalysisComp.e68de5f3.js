import{C as w,a as P,L as $,B as A,p as L,b as R,c as j,G as B,d as h,S as f,e as k}from"./App.a96faa7c.js";import{r as t}from"./vendor.3ebd1a41.js";import{a as l,j as e}from"./index.cb9746e0.js";w.register(P,$,A,L,R,j);const E=(d,i)=>({indexAxis:i?"y":"x",responsive:!0,maintainAspectRatio:!1,redraw:!0,plugins:{legend:{position:"top"},title:{display:!0,text:d},barValueSpacing:40,tooltips:{displayColors:!0,callbacks:{mode:"x"}},datalabels:{display:u=>!1},scales:{xAxes:[{gridLines:{display:!0,drawBorder:!1}}],yAxes:[{gridLines:{display:!1,drawBorder:!0}}]}}}),O=({subject:d})=>{const{authToken:i}=t.exports.useContext(B),[u,x]=t.exports.useState([]),[g,v]=t.exports.useState([]),[n,N]=t.exports.useState(""),[o,S]=t.exports.useState({firstname:"",lastname:"",profilePic:""}),[c,D]=t.exports.useState({isSpecial:!1,label:"",value:""}),[b,_]=t.exports.useState([]),[p,y]=t.exports.useState({pass:[],fail:[]}),C=!1;return t.exports.useEffect(()=>{const a=localStorage.getItem("classRefId")||"";h.get(`/api/grade/learners/${a}`,{headers:{Authorization:`Bearer ${i}`}}).then(({data:s})=>{if(s){let r=s.learners;x(r.map(m=>({label:`${m.firstname} ${m.lastname}`,value:m._id})));return}})},[]),t.exports.useEffect(()=>{c.value&&h.get(`/api/analytics/learner/${n}/${c.value}${c.isSpecial?"/special":""}`,{headers:{Authorization:`Bearer ${i}`}}).then(({data:a})=>{if(a){let s=a.plottable;y({pass:s.map(r=>r.score.passed),fail:s.map(r=>r.score.total-r.score.passed)});return}})},[c]),t.exports.useEffect(()=>{if(n){const a=localStorage.getItem("classId")||"";h.get(`/api/analytics/subject/${a}/${n}/${d}`,{headers:{Authorization:`Bearer ${i}`}}).then(({data:s})=>{if(s){S(s.student),v(s.papersDone.map(r=>({label:r.subject,value:r.paperID,isSpecial:r.isSpecial})));return}})}},[n]),l("div",{className:"row",children:[o.firstname?e("div",{className:"col s12 center",children:l("div",{style:{margin:"auto"},children:[e("img",{style:{height:"100px",width:"100px",objectFit:"contain",border:"1px solid #d3d3d3",borderRadius:"50%"},src:o.profilePic?o.profilePic:"https://cdn2.iconfinder.com/data/icons/child-people-face-avatar-3/500/child_152-512.png"}),e("br",{}),e("span",{className:"sub-modal-texts",style:{letterSpacing:"1px"},children:l("b",{children:[o.firstname," ",o.lastname]})})]})}):null,e("div",{className:"col s12 m12 l4",children:e("div",{className:"card z-depth-0",style:{border:"1px solid #dcdee2"},children:l("div",{className:"card-content",children:[l("div",{className:"row",children:[l("div",{className:"col s12 m12",children:[e("label",{children:"Learner"}),e(f,{onChange:a=>{N((a==null?void 0:a.value)||"")},options:u,placeholder:"select learner..."})]}),l("div",{className:"col s12 m12",children:[e("label",{children:"Paper"}),e(f,{options:g,onChange:a=>{},placeholder:"select paper..."})]})]}),e("div",{className:"row",id:"performanceReportButton",hidden:!0,children:e("div",{className:"col s12 m12",children:l("button",{onClick:()=>{},"data-position":"bottom","data-tooltip":"Scroll down to view or download the report",className:"btn-small sub-modal-texts tooltipped white black-text waves-effect waves-black z-depth-1",style:{width:"100%",fontWeight:"bold"},children:["PERFORMANCE REPORT",e("i",{className:"material-icons right",children:"assessment"})]})})})]})})}),e("div",{className:"col s12 m12 l8",children:e("div",{className:"card z-depth-0",style:{border:"1px solid #dcdee2"},children:e("div",{className:"card-content",children:e("div",{className:"row",id:"insertChart",children:e(k,{options:E("Performance Analysis",C),style:{height:"300px"},data:{labels:p.pass.map((a,s)=>`Attempt ${s+1}`),datasets:[{label:"Pass",data:p.pass,backgroundColor:"#00c853"},{label:"Fail",data:p.fail,backgroundColor:"#f44336"}]}})})})})}),b.length?l("div",{className:"col s12 m12",children:[e("h3",{className:"hide-on-small-only",children:e("i",{className:"mdi-content-send brown-text"})}),l("h5",{className:"center sub-sub-headings",children:["Last (",b.length,") paper(s)"]}),e("div",{className:"divider"}),e("div",{className:"section",children:[1,1,1].map((a,s)=>e("div",{className:"col s6 m3 l2",children:e("div",{className:"hoverable",style:{backgroundColor:"#fffde7",marginBottom:"5px",cursor:"pointer",border:"1px solid #d3d3d3",borderRadius:"2px",padding:"4px"},children:l("div",{className:"center",children:[e("span",{className:"sub-names truncate",children:e("b",{children:"English"})}),e("br",{}),e("span",{className:"sub-modal-texts teal-text truncate",style:{backgroundColor:"#fff",border:"1px solid #d3d3d3",padding:"4px",borderRadius:"2px"},children:e("b",{children:"SCORE: 12/50"})})]})})}))})]}):null]})};export{O as default,E as options};
