import{_ as y,a as s,j as e}from"./index.7850a012.js";import{u as S,R as p,d as w,m as L,e as R,I as $,f as j}from"./App.5befcaf7.js";import{R as h,r as l}from"./vendor.c3066ab3.js";const I=h.lazy(()=>y(()=>import("./PerformanceDistribution.1b12216e.js"),["assets/PerformanceDistribution.1b12216e.js","assets/vendor.c3066ab3.js","assets/App.5befcaf7.js","assets/App.bede793c.css","assets/index.7850a012.js","assets/index.5cc787a4.css"])),k=({name:n,numeric:i})=>s("div",{className:"col s6 m4",style:{border:"1px solid #d3d3d3",borderRadius:"2px"},children:[e("h5",{className:"sub-names",children:n}),e("p",{className:"sub-modal-texts",children:i})]}),D=({subject:n})=>{const{authToken:i}=S(),c=p(w),o=p(L),[a,u]=l.exports.useState({active:0,mean:0,total:0,performance_percentages:{}}),[d,g]=l.exports.useState("0.00"),{isLoading:x,data:r,isError:f,error:b,isIdle:N,isSuccess:m}=R("in_app_grade_general_mean",()=>j.get(`/api/deep-analytics/subject-mean/${c}/${o}/${n}`,{headers:{Authorization:`Bearer ${i}`}}).then(({data:t})=>{if(t&&t.status)return t.analytics;throw new Error("Unexpected error!")}),{enabled:!!c&&!!o});return l.exports.useEffect(()=>{m&&r&&(u(r),r.mean&&g(r.mean.toFixed(2)))},[m]),s("div",{className:"section",children:[f?e("div",{className:"row",children:e("div",{className:"col s12",children:s("div",{className:"sub-modal-texts",style:{borderLeft:"2px solid red",paddingLeft:"5px",paddingRight:"5px",borderRadius:"3px",lineHeight:"4em",backgroundColor:"rgba(255,0,0, 0.1)",display:"flex",flexDirection:"row",alignItems:"center"},children:[e("i",{className:"material-icons left",children:"error_outline"}),e("p",{children:b.message})]})})}):null,x||N?e("div",{className:"row",children:e("div",{className:"col s12",children:s("div",{className:"sub-modal-texts",style:{borderLeft:"2px solid green",paddingLeft:"5px",paddingRight:"5px",borderRadius:"3px",lineHeight:"4em",backgroundColor:"rgba(0,255,0, 0.1)",display:"flex",flexDirection:"row",alignItems:"center"},children:[e("i",{className:"material-icons left",children:"info"}),e("span",{children:e("b",{children:"Fetching analytics..."})})]})})}):null,e("div",{className:"row center sub-names",children:s("div",{className:"col s12",children:[e("span",{style:{fontSize:"120px"},className:"teal-text",children:d.split(".")[0]}),s("span",{style:{fontSize:"40px"},className:"teal-text",children:[".",d.split(".")[1]]}),e("span",{style:{marginLeft:"5px"},className:"sub-modal-texts",children:e("b",{children:"mean"})})]})}),e("div",{className:"row center",children:e(h.Suspense,{fallback:e($,{width:400,height:50}),children:e(I,{performance_percentages:a.performance_percentages,student_total:a.total})})}),e("div",{className:"row center",children:[{label:"Total Learners",point:`${a.total}`},{label:"Active Learners",point:`${a.active}`},{label:"Engagement Percentage",point:`${(a.active/(a.total||1)*100).toFixed(0)}%`}].map(({label:t,point:_},v)=>e(k,{name:t,numeric:`${_}`},`static_${v}`))})]})};export{D as default};
