var T=Object.defineProperty;var m=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var u=(e,r,s)=>r in e?T(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s,g=(e,r)=>{for(var s in r||(r={}))I.call(r,s)&&u(e,s,r[s]);if(m)for(var s of m(r))R.call(r,s)&&u(e,s,r[s]);return e};import{u as S,h as x,e as j,i as k,f,j as O,t as h,k as z}from"./App.9052e22c.js";import{r as b}from"./vendor.497bb12a.js";import{j as a,a as l,F}from"./index.70091d13.js";const $=e=>h.success(e,{position:h.POSITION.TOP_RIGHT,autoClose:2e3,className:"sub-modal-texts"}),A=e=>h.error(e,{position:h.POSITION.TOP_RIGHT,autoClose:2e3,className:"sub-modal-texts"}),E=({_id:e,firstname:r,lastname:s,gender:c,profilePic:n})=>{const o=x();return a("div",{className:"col s6 m4",children:a("div",{onClick:p=>o(`/learner/${e}`),className:"hoverable z-depth-0 hoverable sub-modal-texts",style:{cursor:"pointer",border:"1px solid #d3d3d3",borderRadius:"2px",padding:"5px",marginBottom:"5px"},children:l("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[a("img",{style:{height:"100px",width:"100px",objectFit:"contain",border:"1px solid #d3d3d3",borderRadius:"50%"},src:n||z(c)}),a("ul",{style:{paddingLeft:"20px"},children:a("li",{style:{letterSpacing:"1px"},children:l("b",{children:[r," ",s]})})})]})})})},J=({classRefId:e})=>{const{authToken:r,isTeacher:s}=S(),c=x(),[n,o]=b.exports.useState([]),[p,v]=b.exports.useState([]),{isError:N,error:w,isLoading:_,isSuccess:y,isIdle:C}=j(["in_app_grade_learners",e],()=>f.get(`/api/grade/learners/${e}`,{headers:{Authorization:`Bearer ${r}`}}).then(({data:i})=>{if(i){const t=i.learners;o(t),v(t);return}throw new Error("Failed to fetch learners")}),{enabled:!!r&&!!e});if(_||C)return a(k,{});const L=i=>{const t=(i.target.value||"").toLowerCase();if(!t){o(p);return}o(p.filter(d=>d.firstname.toLowerCase().indexOf(t)>-1||d.lastname.toLowerCase().indexOf(t)>-1))};return l(F,{children:[l("div",{className:"row",children:[l("div",{className:"col s12 m8 left-align",children:[l("button",{disabled:s,className:"waves-effect waves-light btn-flat",style:{marginRight:"5px"},onClick:i=>c("/learner/import"),children:[a("i",{className:"material-icons right",children:"cloud_upload"}),"Import Learners"]}),l("button",{style:{marginRight:"5px"},disabled:s,className:"waves-effect waves-light btn-flat",onClick:i=>c("/learner/new"),children:[a("i",{className:"material-icons right",children:"person_add"}),"Add Learner"]}),l("button",{disabled:!n.length,className:"waves-effect waves-light btn-flat",onClick:i=>{const t=localStorage.getItem("classRefId")||"";f.get(`/api/grade/learners/credentials/${t}`,{headers:{Authorization:`Bearer ${r}`}}).then(async({data:d})=>{if(d){if(await O(d,"credentials.xlsx")){$("Exported leaners credentials successfully!");return}A("Failed to export learners credentials. Please contact zoezi team")}})},children:[a("i",{className:"material-icons right",children:"cloud_download"}),"Export Credentials"]})]}),a("div",{className:"col s12 m4 right-align",children:a("input",{type:"search",className:"browser-default",onChange:L,style:{border:"1px solid #d3d3d3",borderRadius:"20px",lineHeight:"1px",padding:"5px 10px"},placeholder:"search learner..."})})]}),N?a("div",{className:"row",children:a("div",{className:"col s12",children:l("div",{className:"sub-modal-texts",style:{borderLeft:"2px solid red",paddingLeft:"5px",paddingRight:"5px",borderRadius:"3px",lineHeight:"4em",backgroundColor:"rgba(255,0,0, 0.1)",display:"flex",flexDirection:"row",alignItems:"center"},children:[a("i",{className:"material-icons left",children:"error_outline"}),a("p",{children:w})]})})}):null,a("div",{className:"row",children:y&&n.map((i,t)=>a(E,g({},i),t))})]})};export{J as default};
