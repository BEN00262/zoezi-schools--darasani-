var we=Object.defineProperty,ke=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var pe=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var de=(t,n,l)=>n in t?we(t,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[n]=l,O=(t,n)=>{for(var l in n||(n={}))Re.call(n,l)&&de(t,l,n[l]);if(pe)for(var l of pe(n))ze.call(n,l)&&de(t,l,n[l]);return t},z=(t,n)=>ke(t,Ee(n));import{_,D as Te,E as I,F as he,H as fe,I as ge,R as U,M as me,y as je,J as Me}from"./App.77f6c601.js";import{R as C,a as f}from"./vendor.0b632b43.js";import{j as c,a as y,F as $e}from"./index.094b12c6.js";import{totalStudentsInSubject as ve}from"./TopFailedQuestions.4cf1c9fe.js";function xe(t,n){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),l.push.apply(l,i)}return l}function Ve(t){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?arguments[n]:{};n%2?xe(Object(l),!0).forEach(function(i){_(t,i,l[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):xe(Object(l)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(l,i))})}return t}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},F(t)}function Be(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function De(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ke(t,n){if(n&&(Te(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return De(t)}function be(t){var n=Be();return function(){var i=F(t),e;if(n){var r=F(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return Ke(this,e)}}var Q=function(n){var l,i="".concat(n.rootPrefixCls,"-item"),e=I(i,"".concat(i,"-").concat(n.page),(l={},_(l,"".concat(i,"-active"),n.active),_(l,"".concat(i,"-disabled"),!n.page),_(l,n.className,!!n.className),l)),r=function(){n.onClick(n.page)},s=function(d){n.onKeyPress(d,n.onClick,n.page)};return C.createElement("li",{title:n.showTitle?n.page:null,className:e,onClick:r,onKeyPress:s,tabIndex:"0"},n.itemRender(n.page,"page",C.createElement("a",{rel:"nofollow"},n.page)))},E={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40},Ce=function(t){he(l,t);var n=be(l);function l(){var i;fe(this,l);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=n.call.apply(n,[this].concat(r)),i.state={goInputText:""},i.buildOptionText=function(o){return"".concat(o," ").concat(i.props.locale.items_per_page)},i.changeSize=function(o){i.props.changeSize(Number(o))},i.handleChange=function(o){i.setState({goInputText:o.target.value})},i.handleBlur=function(o){var d=i.props,a=d.goButton,u=d.quickGo,p=d.rootPrefixCls,h=i.state.goInputText;a||h===""||(i.setState({goInputText:""}),!(o.relatedTarget&&(o.relatedTarget.className.indexOf("".concat(p,"-item-link"))>=0||o.relatedTarget.className.indexOf("".concat(p,"-item"))>=0))&&u(i.getValidValue()))},i.go=function(o){var d=i.state.goInputText;d!==""&&(o.keyCode===E.ENTER||o.type==="click")&&(i.setState({goInputText:""}),i.props.quickGo(i.getValidValue()))},i}return ge(l,[{key:"getValidValue",value:function(){var e=this.state.goInputText;return!e||isNaN(e)?void 0:Number(e)}},{key:"getPageSizeOptions",value:function(){var e=this.props,r=e.pageSize,s=e.pageSizeOptions;return s.some(function(o){return o.toString()===r.toString()})?s:s.concat([r.toString()]).sort(function(o,d){var a=isNaN(Number(o))?0:Number(o),u=isNaN(Number(d))?0:Number(d);return a-u})}},{key:"render",value:function(){var e=this,r=this.props,s=r.pageSize,o=r.locale,d=r.rootPrefixCls,a=r.changeSize,u=r.quickGo,p=r.goButton,h=r.selectComponentClass,g=r.buildOptionText,S=r.selectPrefixCls,v=r.disabled,A=this.state.goInputText,R="".concat(d,"-options"),P=h,L=null,T=null,j=null;if(!a&&!u)return null;var J=this.getPageSizeOptions();if(a&&P){var G=J.map(function(M,k){return C.createElement(P.Option,{key:k,value:M.toString()},(g||e.buildOptionText)(M))});L=C.createElement(P,{disabled:v,prefixCls:S,showSearch:!1,className:"".concat(R,"-size-changer"),optionLabelProp:"children",dropdownMatchSelectWidth:!1,value:(s||J[0]).toString(),onChange:this.changeSize,getPopupContainer:function(k){return k.parentNode},"aria-label":o.page_size,defaultOpen:!1},G)}return u&&(p&&(j=typeof p=="boolean"?C.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:v,className:"".concat(R,"-quick-jumper-button")},o.jump_to_confirm):C.createElement("span",{onClick:this.go,onKeyUp:this.go},p)),T=C.createElement("div",{className:"".concat(R,"-quick-jumper")},o.jump_to,C.createElement("input",{disabled:v,type:"text",value:A,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":o.page}),o.page,j)),C.createElement("li",{className:"".concat(R)},L,T)}}]),l}(C.Component);Ce.defaultProps={pageSizeOptions:["10","20","50","100"]};var Qe={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"};function X(){}function ye(t){var n=Number(t);return typeof n=="number"&&!isNaN(n)&&isFinite(n)&&Math.floor(n)===n}function Ae(t,n,l){return l}function w(t,n,l){var i=typeof t=="undefined"?n.pageSize:t;return Math.floor((l.total-1)/i)+1}var _e=function(t){he(l,t);var n=be(l);function l(i){var e;fe(this,l),e=n.call(this,i),e.getJumpPrevPage=function(){return Math.max(1,e.state.current-(e.props.showLessItems?3:5))},e.getJumpNextPage=function(){return Math.min(w(void 0,e.state,e.props),e.state.current+(e.props.showLessItems?3:5))},e.getItemIcon=function(a,u){var p=e.props.prefixCls,h=a||c("button",{type:"button","aria-label":u,className:"".concat(p,"-item-link")});return typeof a=="function"&&(h=C.createElement(a,Ve({},e.props))),h},e.savePaginationNode=function(a){e.paginationNode=a},e.isValid=function(a){var u=e.props.total;return ye(a)&&a!==e.state.current&&ye(u)&&u>0},e.shouldDisplayQuickJumper=function(){var a=e.props,u=a.showQuickJumper,p=a.total,h=e.state.pageSize;return p<=h?!1:u},e.handleKeyDown=function(a){(a.keyCode===E.ARROW_UP||a.keyCode===E.ARROW_DOWN)&&a.preventDefault()},e.handleKeyUp=function(a){var u=e.getValidValue(a),p=e.state.currentInputValue;u!==p&&e.setState({currentInputValue:u}),a.keyCode===E.ENTER?e.handleChange(u):a.keyCode===E.ARROW_UP?e.handleChange(u-1):a.keyCode===E.ARROW_DOWN&&e.handleChange(u+1)},e.handleBlur=function(a){var u=e.getValidValue(a);e.handleChange(u)},e.changePageSize=function(a){var u=e.state.current,p=w(a,e.state,e.props);u=u>p?p:u,p===0&&(u=e.state.current),typeof a=="number"&&("pageSize"in e.props||e.setState({pageSize:a}),"current"in e.props||e.setState({current:u,currentInputValue:u})),e.props.onShowSizeChange(u,a),"onChange"in e.props&&e.props.onChange&&e.props.onChange(u,a)},e.handleChange=function(a){var u=e.props.disabled,p=a;if(e.isValid(p)&&!u){var h=w(void 0,e.state,e.props);p>h?p=h:p<1&&(p=1),"current"in e.props||e.setState({current:p,currentInputValue:p});var g=e.state.pageSize;return e.props.onChange(p,g),p}return e.state.current},e.prev=function(){e.hasPrev()&&e.handleChange(e.state.current-1)},e.next=function(){e.hasNext()&&e.handleChange(e.state.current+1)},e.jumpPrev=function(){e.handleChange(e.getJumpPrevPage())},e.jumpNext=function(){e.handleChange(e.getJumpNextPage())},e.hasPrev=function(){return e.state.current>1},e.hasNext=function(){return e.state.current<w(void 0,e.state,e.props)},e.runIfEnter=function(a,u){if(a.key==="Enter"||a.charCode===13){for(var p=arguments.length,h=new Array(p>2?p-2:0),g=2;g<p;g++)h[g-2]=arguments[g];u.apply(void 0,h)}},e.runIfEnterPrev=function(a){e.runIfEnter(a,e.prev)},e.runIfEnterNext=function(a){e.runIfEnter(a,e.next)},e.runIfEnterJumpPrev=function(a){e.runIfEnter(a,e.jumpPrev)},e.runIfEnterJumpNext=function(a){e.runIfEnter(a,e.jumpNext)},e.handleGoTO=function(a){(a.keyCode===E.ENTER||a.type==="click")&&e.handleChange(e.state.currentInputValue)};var r=i.onChange!==X,s="current"in i;s&&!r&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var o=i.defaultCurrent;"current"in i&&(o=i.current);var d=i.defaultPageSize;return"pageSize"in i&&(d=i.pageSize),o=Math.min(o,w(d,void 0,i)),e.state={current:o,currentInputValue:o,pageSize:d},e}return ge(l,[{key:"componentDidUpdate",value:function(e,r){var s=this.props.prefixCls;if(r.current!==this.state.current&&this.paginationNode){var o=this.paginationNode.querySelector(".".concat(s,"-item-").concat(r.current));o&&document.activeElement===o&&o.blur()}}},{key:"getValidValue",value:function(e){var r=e.target.value,s=w(void 0,this.state,this.props),o=this.state.currentInputValue,d;return r===""?d=r:isNaN(Number(r))?d=o:r>=s?d=s:d=Number(r),d}},{key:"getShowSizeChanger",value:function(){var e=this.props,r=e.showSizeChanger,s=e.total,o=e.totalBoundaryShowSizeChanger;return typeof r!="undefined"?r:s>o}},{key:"renderPrev",value:function(e){var r=this.props,s=r.prevIcon,o=r.itemRender,d=o(e,"prev",this.getItemIcon(s,"prev page")),a=!this.hasPrev();return f.exports.isValidElement(d)?f.exports.cloneElement(d,{disabled:a}):d}},{key:"renderNext",value:function(e){var r=this.props,s=r.nextIcon,o=r.itemRender,d=o(e,"next",this.getItemIcon(s,"next page")),a=!this.hasNext();return f.exports.isValidElement(d)?f.exports.cloneElement(d,{disabled:a}):d}},{key:"render",value:function(){var e=this,r=this.props,s=r.prefixCls,o=r.className,d=r.style,a=r.disabled,u=r.hideOnSinglePage,p=r.total,h=r.locale,g=r.showQuickJumper,S=r.showLessItems,v=r.showTitle,A=r.showTotal,R=r.simple,P=r.itemRender,L=r.showPrevNextJumpers,T=r.jumpPrevIcon,j=r.jumpNextIcon,J=r.selectComponentClass,G=r.selectPrefixCls,M=r.pageSizeOptions,k=this.state,m=k.current,$=k.pageSize,Pe=k.currentInputValue;if(u===!0&&p<=$)return null;var x=w(void 0,this.state,this.props),b=[],te=null,ne=null,re=null,ae=null,V=null,q=g&&g.goButton,N=S?1:2,ie=m-1>0?m-1:0,se=m+1<x?m+1:x,oe=Object.keys(this.props).reduce(function(ue,K){return(K.substr(0,5)==="data-"||K.substr(0,5)==="aria-"||K==="role")&&(ue[K]=e.props[K]),ue},{});if(R)return q&&(typeof q=="boolean"?V=c("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO,children:h.jump_to_confirm}):V=c("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO,children:q}),V=c("li",{title:v?"".concat(h.jump_to).concat(m,"/").concat(x):null,className:"".concat(s,"-simple-pager"),children:V})),y("ul",z(O({className:I(s,"".concat(s,"-simple"),_({},"".concat(s,"-disabled"),a),o),style:d,ref:this.savePaginationNode},oe),{children:[c("li",{title:v?h.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:I("".concat(s,"-prev"),_({},"".concat(s,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev(),children:this.renderPrev(ie)}),y("li",{title:v?"".concat(m,"/").concat(x):null,className:"".concat(s,"-simple-pager"),children:[c("input",{type:"text",value:Pe,disabled:a,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:"3"}),c("span",{className:"".concat(s,"-slash"),children:"/"}),x]}),c("li",{title:v?h.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:I("".concat(s,"-next"),_({},"".concat(s,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext(),children:this.renderNext(se)}),V]}));if(x<=3+N*2){var le={locale:h,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:v,itemRender:P};x||b.push(f.exports.createElement(Q,z(O({},le),{key:"noPager",page:1,className:"".concat(s,"-item-disabled")})));for(var B=1;B<=x;B+=1){var Se=m===B;b.push(f.exports.createElement(Q,z(O({},le),{key:B,page:B,active:Se})))}}else{var Ne=S?h.prev_3:h.prev_5,Ie=S?h.next_3:h.next_5;L&&(te=c("li",{title:v?Ne:null,onClick:this.jumpPrev,tabIndex:"0",onKeyPress:this.runIfEnterJumpPrev,className:I("".concat(s,"-jump-prev"),_({},"".concat(s,"-jump-prev-custom-icon"),!!T)),children:P(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(T,"prev page"))},"prev"),ne=c("li",{title:v?Ie:null,tabIndex:"0",onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:I("".concat(s,"-jump-next"),_({},"".concat(s,"-jump-next-custom-icon"),!!j)),children:P(this.getJumpNextPage(),"jump-next",this.getItemIcon(j,"next page"))},"next")),ae=c(Q,{locale:h,last:!0,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,page:x,active:!1,showTitle:v,itemRender:P},x),re=c(Q,{locale:h,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,page:1,active:!1,showTitle:v,itemRender:P},1);var W=Math.max(1,m-N),H=Math.min(m+N,x);m-1<=N&&(H=1+N*2),x-m<=N&&(W=x-N*2);for(var D=W;D<=H;D+=1){var Oe=m===D;b.push(c(Q,{locale:h,rootPrefixCls:s,onClick:this.handleChange,onKeyPress:this.runIfEnter,page:D,active:Oe,showTitle:v,itemRender:P},D))}m-1>=N*2&&m!==1+2&&(b[0]=f.exports.cloneElement(b[0],{className:"".concat(s,"-item-after-jump-prev")}),b.unshift(te)),x-m>=N*2&&m!==x-2&&(b[b.length-1]=f.exports.cloneElement(b[b.length-1],{className:"".concat(s,"-item-before-jump-next")}),b.push(ne)),W!==1&&b.unshift(re),H!==x&&b.push(ae)}var ce=null;A&&(ce=c("li",{className:"".concat(s,"-total-text"),children:A(p,[p===0?0:(m-1)*$+1,m*$>p?p:m*$])}));var Y=!this.hasPrev()||!x,Z=!this.hasNext()||!x;return y("ul",z(O({className:I(s,o,_({},"".concat(s,"-disabled"),a)),style:d,unselectable:"unselectable",ref:this.savePaginationNode},oe),{children:[ce,c("li",{title:v?h.prev_page:null,onClick:this.prev,tabIndex:Y?null:0,onKeyPress:this.runIfEnterPrev,className:I("".concat(s,"-prev"),_({},"".concat(s,"-disabled"),Y)),"aria-disabled":Y,children:this.renderPrev(ie)}),b,c("li",{title:v?h.next_page:null,onClick:this.next,tabIndex:Z?null:0,onKeyPress:this.runIfEnterNext,className:I("".concat(s,"-next"),_({},"".concat(s,"-disabled"),Z)),"aria-disabled":Z,children:this.renderNext(se)}),c(Ce,{disabled:a,locale:h,rootPrefixCls:s,selectComponentClass:J,selectPrefixCls:G,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:m,pageSize:$,pageSizeOptions:M,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:q})]}))}}],[{key:"getDerivedStateFromProps",value:function(e,r){var s={};if("current"in e&&(s.current=e.current,e.current!==r.current&&(s.currentInputValue=s.current)),"pageSize"in e&&e.pageSize!==r.pageSize){var o=r.current,d=w(e.pageSize,r,e);o=o>d?d:o,"current"in e||(s.current=o,s.currentInputValue=o),s.pageSize=e.pageSize}return s}}]),l}(C.Component);_e.defaultProps={defaultCurrent:1,total:0,defaultPageSize:10,onChange:X,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:X,locale:Qe,style:{},itemRender:Ae,totalBoundaryShowSizeChanger:50};const Le=({option:t,index:n,position:l,analytics:i})=>c("div",{children:c("p",{children:y("label",{children:[c("input",{type:"checkbox",className:"filled-in",disabled:!0,checked:t.isCorrect,name:`options_${l}`}),c("span",{className:t.isCorrect?"green-text":"black-text",children:c("b",{children:c("span",{dangerouslySetInnerHTML:{__html:t.option}})})})]})})},n),Je=({option:t,index:n,position:l,analytics:i})=>c("div",{children:c("p",{children:y("label",{children:[c("input",{disabled:!0,required:!0,checked:t.isCorrect,className:"with-gap",name:`options_${l}`,type:"radio"}),c("span",{className:t.isCorrect?"green-text":"black-text",children:c("b",{children:c("span",{dangerouslySetInnerHTML:{__html:`
                                <div>${t.option}</div>
                                <div class="sub-modal-texts ${t.isCorrect?"green-text":"red-text"}">Selected by (${i}%) of the students</div>
                                `}})})})]})})},n),qe=({question:t,failed:n,students:l,position:i,choices:e})=>{const r=U(ve),o=f.exports.useMemo(()=>{var u,p;return((p=(u=t==null?void 0:t.options_next)==null?void 0:u.filter(h=>h.isCorrect))==null?void 0:p.length)||0},[t])>1||!1;f.exports.useEffect(()=>{let u=document.querySelectorAll(".question-comp img");me.Materialbox.init(u)},[]);const a=(()=>{let u=o?Le:Je;return({index:p,option:h,analytics:g})=>c(u,{analytics:g,position:p+1,option:h,index:p},p)})();return y("div",{children:[c("span",{dangerouslySetInnerHTML:{__html:`
                    <div style="display:flex;flex-direction:row;align-items:flex-start;">
                        <p style="margin-right:5px;">${i}.  </p>
                        <div>
                            <strong class="question-comp">${t.question}</strong>
                            <span class="sub-modal-texts green-text" style="margin-left:5px;">
                                <b>[ Attempted by ${l} (${(l/(r||1)*100).toFixed(0)}%) student(s) ]</b>
                            </span>

                            <span class="sub-modal-texts red-text" style="margin-left:5px;">
                                <b>[ Failed by ${(n/l*100).toFixed(0)}% of the students ]</b>
                            </span>
                        </div>
                    </div>
                `}}),c("div",{style:{marginTop:"10px",marginLeft:"17px",marginBottom:"10px"},children:t.options_next&&t.options_next.map((u,p)=>{let h=Object.keys(e).find(g=>g===u._id);return a({option:u,index:p,analytics:((h&&e[u._id]||0)/l*100).toFixed(0)})})}),c("div",{style:{marginLeft:"17px",marginBottom:"10px"},children:c("span",{dangerouslySetInnerHTML:{__html:`
                        <blockquote class="red lighten-5">
                            <span>
                            ${t.additionalInfo}
                            </span>
                        </blockquote>
                    `}})})]})};const Ue=({option:t,index:n,position:l,isMultiAnswersQuestion:i})=>c("div",{children:c("p",{children:y("label",{children:[c("input",{type:"checkbox",checked:t.isCorrect,className:"filled-in",disabled:!0,required:!0,name:`sub_option_answer_${l}`}),c("span",{className:t.isCorrect?"green-text":"black-text",children:c("b",{children:c("span",{dangerouslySetInnerHTML:{__html:t.option}})})})]})})},n),Fe=({option:t,keyValue:n,position:l,isMultiAnswersQuestion:i})=>c("p",{children:y("label",{children:[c("input",{disabled:!0,checked:t.isCorrect,required:!0,className:"with-gap",type:"radio",name:`sub_option_answer_${l}`}),c("span",{className:t.isCorrect?"green-text":"black-text",children:c("b",{children:c("span",{dangerouslySetInnerHTML:{__html:t.option}})})})]})},n),Ge=({children:t,index:n})=>y("div",{style:{marginLeft:"15px",marginTop:"5px",marginBottom:"5px",display:"flex",flexDirection:"row"},children:[n+1,".",c("div",{children:t})]}),We=({children:t})=>c("div",{style:{marginLeft:"15px",marginTop:"5px",marginBottom:"5px"},children:t}),He=({question:t,index:n,savedState:l,parentId:i})=>{f.exports.useEffect(()=>{},[]);const e=f.exports.useMemo(()=>{var a,u;return((u=(a=t==null?void 0:t.options)==null?void 0:a.filter(p=>p.isCorrect))==null?void 0:u.length)>1},[t]),r=t.question.trim().replace(/(<([^>]+)>)/ig,"").trim().length<=1,s=r?Ge:We,d=(()=>{let a=e?Ue:Fe;return({position:u,index:p,option:h,quesIndex:g})=>c(a,{keyValue:`sub_option_${p}_${g}`,isMultiAnswersQuestion:r,position:u,option:h,index:p},`sub_option_${p}_${g}`)})();return y("div",{style:{marginLeft:"6px"},children:[c("span",{dangerouslySetInnerHTML:{__html:r?"":`
                        <div style="display:flex;flex-direction:row;">
                            <p style="margin-right:5px;">
                                ${n+1}.  
                            </p>
                            <p><strong>
                            ${t.question}
                            </strong></p>
                        </div>
                    `}}),c(s,{index:n,children:t.options.map((a,u)=>d({position:n,index:n,quesIndex:u,option:a}))}),c("div",{style:{marginLeft:"15px",marginBottom:"10px"},children:c("span",{dangerouslySetInnerHTML:{__html:`
                        <blockquote class="red lighten-5">
                            <span>
                                ${t.additionalInfo}
                            </span>
                        </blockquote>
                    `}})})]})},Ye=t=>{let n=5,l=t.length%n,i=Math.floor(t.length/n)+(l>0?1:0),e=new Array(i).fill([]);for(let r=0;r<i;r++)e[r]=t.slice(r*n,r*n+n);return e},Ze=(t,n,l=0)=>(i,e=!1)=>{let r=[];return i.forEach(s=>{let o=s.attempted_options[0].optionID,d=s.attempted_options[0].optionIndex,a=s.question;for(let u=0;u<n.length;u++){let p=n[u];if(p._id===a){let h=p.options.find((g,S)=>g._id===o||S===d);h&&r.push({position:u+1+l,option:h.option,isCorrect:h.isCorrect});break}}}),r.reduce((s,o)=>s.replace(new RegExp(`_{2,4}\\s?${o.position}\\s?_{2,4}`),`<span style="color:${e&&o.isCorrect?"green":"red"};"><u><b>${o.option}</b></u></span>`),t)},Xe=C.memo(({parentId:t,sub_questions:n,savedChildren:l})=>{const i=U(ee),e=f.exports.useCallback(d=>l.find(a=>a.question===d)||null,[n]);let r=f.exports.useMemo(()=>Ye(n||[]),[n]),s=r[i],o=r.slice(0,i).reduce((d,a)=>d+a.length,0);return c($e,{children:s.map((d,a)=>c(He,{parentId:t,question:d,savedState:e(d._id),index:a+o},a))})}),et=({question:t,failed:n,students:l})=>{const[i,e]=f.exports.useState([]),[r,s]=f.exports.useState([]),[o,d]=f.exports.useState(t.question),[a,u]=f.exports.useState(-1),p=U(ee),h=U(ve),g=f.exports.useMemo(()=>t.children[0].question.trim().replace(/(<([^>]+)>)/ig,"").trim().length<=1,[t]),S=g?Ze(t.question,t.children,0):v=>t.question;return f.exports.useEffect(()=>{i.length>0&&g&&d(S(i,!0))},[i]),f.exports.useEffect(()=>{let v=document.querySelectorAll(".question-comp img");me.Materialbox.init(v)},[]),f.exports.useEffect(()=>{u(Math.random())},[p]),y("div",{children:[c("span",{dangerouslySetInnerHTML:{__html:`
                    <div>
                        <div>
                            <span class="sub-modal-texts green-text" style="margin-left:5px;">
                                <b>[ Attempted by ${l} (${(l/(h||1)*100).toFixed(0)}%) student(s) ]</b>
                            </span>
                            <span class="sub-modal-texts red-text" style="margin-left:5px;">
                                <b>[ Failed by ${(n/l*100).toFixed(0)}% of the students ]</b>
                            </span>
                        </div>
                        <div class="question-comp">${o}</div>
                    </div>`}}),c("div",{style:{marginTop:"5px"},children:c(Xe,{parentId:t._id,savedChildren:r,sub_questions:t.children||[]},a)})]})},tt=t=>{if(!t.question)return null;switch(t.question.questionType){case"normal":return c(qe,O({},t));case"comprehension":return c(et,O({},t));default:return null}},ee=je({key:"compSubQuestionPageId",default:0}),ot=({stats:t})=>{const[n,l]=f.exports.useState(0),[i,e]=f.exports.useState(-1),[r,s]=Me(ee),[o,d]=f.exports.useState({});f.exports.useEffect(()=>{t.length&&(s(0),d(t[n]),e(Math.random()))},[n]);const a=f.exports.useMemo(()=>o.question&&o.question.questionType==="comprehension"?Math.floor((o.question?(o.question.children||[]).length:0)/5)+((o.question?(o.question.children||[]).length:0)%5>0?1:0):0,[o]);return y("div",{children:[c("div",{className:"row",children:c("div",{className:"col s12 left-align",children:t.length?c(_e,{onChange:(u,p)=>{l(u-1)},current:n+1,total:t.length,pageSize:1}):null})}),o.question&&o.question.questionType==="comprehension"&&a>1?c("div",{style:{border:"1px solid #d3d3d3",marginBottom:"5px",borderRadius:"2px",padding:"5px 6px",position:"sticky",top:64,zIndex:2},children:y("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[c("button",{disabled:r===0,className:"waves-effect waves-light btn-small z-depth-0",onClick:u=>{s(p=>p>0?p-1:p)},children:c("i",{className:"material-icons",children:"arrow_back"})}),c("button",{className:"waves-effect waves-light btn-small z-depth-0",disabled:r>=a-1,onClick:u=>{s(p=>p+1)},children:c("i",{className:"material-icons",children:"arrow_forward"})})]})}):null,c("div",{className:"col s12",style:{border:"1px solid #d3d3d3"},children:t.length>n?c(tt,z(O({},o),{position:n+1}),i):c("p",{className:"center",children:"No questions found"})})]})};export{ee as compSubQuestionPageState,ot as default};
