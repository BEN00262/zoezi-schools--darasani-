import{C as P,a as j,L as B,B as E,p as T,b as R,c as k,G as z,d as p,S as x,e as G}from"./App.742d430c.js";import{r as l}from"./vendor.69103231.js";import{j as e,a as c}from"./index.c02837b5.js";P.register(j,B,E,T,R,k);const L=(h,o)=>({indexAxis:o?"y":"x",responsive:!0,maintainAspectRatio:!1,redraw:!0,plugins:{legend:{position:"top"},title:{display:!0,text:h},barValueSpacing:40,tooltips:{displayColors:!0,callbacks:{mode:"x"}},datalabels:{display:g=>!1},scales:{xAxes:[{gridLines:{display:!0,drawBorder:!1}}],yAxes:[{gridLines:{display:!1,drawBorder:!0}}]}}}),K=()=>{const h=!1,{authToken:o}=l.exports.useContext(z),[g,S]=l.exports.useState([]),[$,N]=l.exports.useState([]),[A,v]=l.exports.useState([]),[r,_]=l.exports.useState({}),[i,y]=l.exports.useState({}),[u,f]=l.exports.useState(""),d=localStorage.getItem("classId")||"",n="/api/analytics",[M,m]=l.exports.useState([]),w=(a,s,t)=>{p.get(`${n}/${d}/special-paper-analytics/${a}/${s}/${t}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:b})=>m(b.data||[]))};l.exports.useEffect(()=>{p.get(`${n}/grade/${d}/special_paper_stats`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:a})=>{S(a.map(({grade:s,is_special:t,_id:b})=>({label:`${s}${t?" | special":""}`,value:`${s}${t?"_special":""}`,is_special:t,_id:b})))})},[]),l.exports.useEffect(()=>{if(!(Object.keys(r).length<1)){if(m([]),r.is_special){p.get(`${n}/${d}/special_paper_stats/${r._id||r.value}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:a})=>{N(a.map(({subType:s,_id:t})=>({value:s,_id:t,label:`${s}s`})))});return}p.get(`${n}/${d}/report_analytics/${r.value}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:a})=>{let s=a.map(t=>({subject:t.subjectName,hits:t.hits,progress:[{subject:t.subjectName,attemptTree:{score:{passed:t.ups,total:t.totalQuestionsAttempted}}}]}));m(s)})}},[r]),l.exports.useEffect(()=>{Object.keys(i).length>0&&(v([]),p.get(`${n}/${d}/special_paper_stats/${r._id||r.value}/${i._id}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:a})=>{v(a.map(({subsubType:s,_id:t})=>({value:s,label:s,_id:t})))}))},[i]),l.exports.useEffect(()=>{u&&w(r.value,i.value,u)},[u]);const C={labels:["English","Kiswahili","Mathematics"],datasets:[{label:"Mean",data:[2,7,7],backgroundColor:"#00c853"}]};return e("div",{children:c("div",{className:"row",children:[e("div",{className:"col s12 m12 l4",children:e("div",{className:"card z-depth-0",style:{border:"1px solid #dcdee2"},children:c("div",{className:"card-content",children:[e("span",{className:"card-title center",children:e("b",{children:e("small",{children:"PERFORMANCE ANALYSIS"})})}),c("div",{className:"row",children:[c("div",{className:"col s12 m12",children:[e("label",{children:"Select Subscription"}),e(x,{onChange:a=>{y({}),f(""),_(a||{})},options:g,placeholder:"choose grade..."})]}),c("div",{className:"col s12 m12",hidden:!(r&&r.is_special),children:[e("label",{children:"Select Type"}),e(x,{options:$,onChange:a=>{y(a||{})},placeholder:"choose type..."})]}),c("div",{className:"col s12 m12",hidden:!(i&&i.value),children:[e("label",{children:"Select Paper"}),e(x,{onChange:a=>{f((a==null?void 0:a.value)||"")},options:A,placeholder:"choose paper..."})]})]}),e("div",{className:"row",id:"performanceReportButton",hidden:!0,children:e("div",{className:"col s12 m12",children:c("button",{onClick:()=>{},"data-position":"bottom","data-tooltip":"Scroll down to view or download the report",className:"btn-small sub-modal-texts tooltipped white black-text waves-effect waves-black z-depth-1",style:{width:"100%",fontWeight:"bold"},children:["PERFORMANCE REPORT",e("i",{className:"material-icons right",children:"assessment"})]})})})]})})}),e("div",{className:"col s12 m12 l8",children:e("div",{className:"card z-depth-0",style:{border:"1px solid #dcdee2"},children:e("div",{className:"card-content",children:e("div",{className:"row",id:"insertChart",children:e(G,{options:L("Performance Analysis",h),style:{height:"300px"},data:C})})})})})]})})};export{K as default,L as options};
