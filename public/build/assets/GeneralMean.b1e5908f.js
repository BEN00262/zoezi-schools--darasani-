import{_ as v,a as s,j as e}from"./index.7c812b6b.js";import{G as y,R as m,D as _,i as S,d as w,E as R}from"./App.7ed8a510.js";import{R as p,a as r}from"./vendor.0b632b43.js";const L=p.lazy(()=>v(()=>import("./PerformanceDistribution.580c0842.js"),["assets/PerformanceDistribution.580c0842.js","assets/vendor.0b632b43.js","assets/App.7ed8a510.js","assets/App.bede793c.css","assets/index.7c812b6b.js","assets/index.5cc787a4.css"])),$=({name:i,numeric:l})=>s("div",{className:"col s6 m4",style:{border:"1px solid #d3d3d3",borderRadius:"2px"},children:[e("h5",{className:"sub-names",children:i}),e("p",{className:"sub-modal-texts",children:l})]}),C=({subject:i})=>{const{authToken:l}=r.exports.useContext(y),h=m(_),x=m(S),[t,u]=r.exports.useState({active:0,mean:0,total:0,performance_percentages:{}}),[c,g]=r.exports.useState("0.00"),[o,b]=r.exports.useState(""),[f,d]=r.exports.useState(!1);return r.exports.useEffect(()=>{d(!0),w.get(`/api/deep-analytics/subject-mean/${h}/${x}/${i}`,{headers:{Authorization:`Bearer ${l}`}}).then(({data:a})=>{if(a&&a.status){let n=a.analytics;u(n),g(n.mean.toFixed(2));return}throw new Error("Unexpected error!")}).catch(a=>{b(a.message)}).finally(()=>{d(!1)})},[]),s("div",{className:"section",children:[o?e("div",{className:"row",children:e("div",{className:"col s12",children:s("div",{className:"sub-modal-texts",style:{borderLeft:"2px solid red",paddingLeft:"5px",paddingRight:"5px",borderRadius:"3px",lineHeight:"4em",backgroundColor:"rgba(255,0,0, 0.1)",display:"flex",flexDirection:"row",alignItems:"center"},children:[e("i",{className:"material-icons left",children:"error_outline"}),e("p",{children:o})]})})}):null,f?e("div",{className:"row",children:e("div",{className:"col s12",children:s("div",{className:"sub-modal-texts",style:{borderLeft:"2px solid green",paddingLeft:"5px",paddingRight:"5px",borderRadius:"3px",lineHeight:"4em",backgroundColor:"rgba(0,255,0, 0.1)",display:"flex",flexDirection:"row",alignItems:"center"},children:[e("i",{className:"material-icons left",children:"info"}),e("span",{children:e("b",{children:"Fetching analytics..."})})]})})}):null,e("div",{className:"row center sub-names",children:s("div",{className:"col s12",children:[e("span",{style:{fontSize:"120px"},className:"teal-text",children:c.split(".")[0]}),s("span",{style:{fontSize:"40px"},className:"teal-text",children:[".",c.split(".")[1]]}),e("span",{style:{marginLeft:"5px"},className:"sub-modal-texts",children:e("b",{children:"mean"})})]})}),e("div",{className:"row center",children:e(p.Suspense,{fallback:e(R,{width:400,height:50}),children:e(L,{performance_percentages:t.performance_percentages,student_total:t.total})})}),e("div",{className:"row center",children:[{label:"Total Learners",point:`${t.total}`},{label:"Active Learners",point:`${t.active}`},{label:"Engagement Percentage",point:`${(t.active/(t.total||1)*100).toFixed(0)}%`}].map(({label:a,point:n},N)=>e($,{name:a,numeric:`${n}`},`static_${N}`))})]})};export{C as default};
