var T=Object.defineProperty,w=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var l=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var c=(s,e,t)=>e in s?T(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,u=(s,e)=>{for(var t in e||(e={}))P.call(e,t)&&c(s,t,e[t]);if(l)for(var t of l(e))C.call(e,t)&&c(s,t,e[t]);return s},p=(s,e)=>w(s,D(e));import{_ as F,j as a,a as m}from"./index.70091d13.js";import{D as x,u as L,R as _,d as $,m as z,r as f,e as A,i as h,x as Q,f as W}from"./App.9052e22c.js";import{R as S,r}from"./vendor.497bb12a.js";const B=S.lazy(()=>F(()=>import("./index.52f20d6d.js"),["assets/index.52f20d6d.js","assets/index.0299b386.css","assets/App.9052e22c.js","assets/App.bede793c.css","assets/vendor.497bb12a.js","assets/index.70091d13.js","assets/index.5cc787a4.css"])),G=x({key:"totalStudentsInSubjectId",default:0}),q=x({key:"studentsWhoPartcipatedStateId",default:0}),V=({subject:s})=>{const{authToken:e}=L(),t=_($),i=_(z),[b,g]=r.exports.useState({stats:[],students:0,students_who_did:0}),[R,j]=r.exports.useState(0),y=f(G),I=f(q),{isLoading:E,isError:k,error:v,data:o,isIdle:N,isSuccess:n}=A("in_app_top_failed_questions",()=>W.get(`/api/deep-analytics/${t}/${i}/${s}`,{headers:{Authorization:`Bearer ${e}`}}).then(({data:d})=>{if(d&&d.status)return d.paper;throw new Error("Unexpected error!")}),{enabled:!!e&&!!t&&!!i,staleTime:1*60*1e3});return r.exports.useEffect(()=>{j(Math.random())},[]),r.exports.useEffect(()=>{n&&o&&(g(o),y(o.students),I(o.students_who_did))},[n]),E||N?a(h,{}):m("div",{className:"section",children:[k?a("div",{className:"row",children:a("div",{className:"col s12",children:m("div",{className:"sub-modal-texts",style:{borderLeft:"2px solid red",paddingLeft:"5px",paddingRight:"5px",borderRadius:"3px",lineHeight:"4em",backgroundColor:"rgba(255,0,0, 0.1)",display:"flex",flexDirection:"row",alignItems:"center"},children:[a("i",{className:"material-icons left",children:"error_outline"}),a("p",{children:v.message})]})})}):null,a(Q,{children:a(S.Suspense,{fallback:a(h,{}),children:r.exports.createElement(B,p(u({},b),{key:R}))})})]})};export{V as default,q as studentsWhoPartcipatedState,G as totalStudentsInSubject};
