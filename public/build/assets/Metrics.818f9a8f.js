import{r as d}from"./vendor.ef6ab39b.js";import{u as g,R as x,n as b,e as v,i as y,o as R,P as _,q as j,T as w,f as N}from"./App.f007f80e.js";import{j as e,a}from"./index.2591e9e0.js";const L=function(s){return a("text",{x:s.x,y:s.y,stroke:s.fill,children:[s.name," ( ",s.value,"% )"]})},I=()=>{const{authToken:s}=g(),[o,c]=d.exports.useState({boys:50,girls:50}),i=x(b),{isLoading:u,isError:f,error:m,data:r,isIdle:p,isSuccess:l}=v(["in_app_grade_gender_distribution",i],()=>N.get(`/api/grade/gender-distribution/${i}`,{headers:{Authorization:`Bearer ${s}`}}).then(({data:n})=>{if(n){const t=n,h=t.boys+t.girls;return{metrics:t,total:h}}throw new Error("Unexpected error")}),{enabled:!!s&&!!i,staleTime:1*1e3*60});return d.exports.useEffect(()=>{l&&r&&c({boys:+(r.metrics.boys/r.total*100).toFixed(0),girls:+(r.metrics.girls/r.total*100).toFixed(0)})},[l]),u||p?e(y,{}):a("div",{className:"row",children:[f?e("div",{className:"row",children:e("div",{className:"col s10 push-s1",children:a("div",{className:"sub-modal-texts",style:{borderLeft:"2px solid red",paddingLeft:"5px",paddingRight:"5px",borderRadius:"3px",lineHeight:"4em",backgroundColor:"rgba(255,0,0, 0.1)",display:"flex",flexDirection:"row",alignItems:"center"},children:[e("i",{className:"material-icons left",children:"error_outline"}),e("p",{children:m.message})]})})}):null,e("div",{className:"col s12",style:{height:"400px"},children:e(R,{width:"100%",height:"100%",children:a(_,{children:[e(j,{dataKey:"value",data:[{name:"Boys",value:o.boys,fill:"rgba(255, 99, 132, 1)"},{name:"Girls",value:o.girls,fill:"rgba(54, 162, 235, 1)"}],innerRadius:70,outerRadius:140,fill:"#82ca9d",label:L}),e(w,{})]})})})]})};export{I as default};
