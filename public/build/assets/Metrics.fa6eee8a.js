import{r as d}from"./vendor.c3066ab3.js";import{u as g,R as x,n as b,e as v,i as y,o as R,P as _,q as j,T as w,f as N}from"./App.fbfe1e5a.js";import{j as e,a as r}from"./index.e1943286.js";const L=function(s){return r("text",{x:s.x,y:s.y,stroke:s.fill,children:[s.name," ( ",s.value,"% )"]})},I=()=>{const{authToken:s}=g(),[o,c]=d.exports.useState({boys:50,girls:50}),i=x(b),{isLoading:u,isError:m,error:p,data:a,isIdle:f,isSuccess:l}=v(["in_app_grade_gender_distribution",i],()=>N.get(`/api/grade/gender-distribution/${i}`,{headers:{Authorization:`Bearer ${s}`}}).then(({data:n})=>{if(n){const t=n,h=t.boys+t.girls;return{metrics:t,total:h}}throw new Error("Unexpected error")}),{enabled:!!s&&!!i,staleTime:1*1e3*60});return d.exports.useEffect(()=>{l&&a&&c({boys:+(a.metrics.boys/a.total*100).toFixed(0),girls:+(a.metrics.girls/a.total*100).toFixed(0)})},[l]),u||f?e(y,{}):r("div",{className:"row",children:[m?e("div",{className:"row",children:e("div",{className:"col s10 push-s1",children:r("div",{className:"sub-modal-texts",style:{borderLeft:"2px solid red",paddingLeft:"5px",paddingRight:"5px",borderRadius:"3px",lineHeight:"4em",backgroundColor:"rgba(255,0,0, 0.1)",display:"flex",flexDirection:"row",alignItems:"center"},children:[e("i",{className:"material-icons left",children:"error_outline"}),e("p",{children:p.message})]})})}):null,e("div",{className:"col s12",style:{height:"400px"},children:e(R,{width:"100%",height:"100%",children:r(_,{children:[e(j,{dataKey:"value",data:[{name:"Boys",value:o.boys,fill:"rgba(255, 99, 132, 1)"},{name:"Girls",value:o.girls,fill:"rgba(54, 162, 235, 1)"}],innerRadius:70,outerRadius:140,fill:"#82ca9d",label:L}),e(w,{})]})})})]})};export{I as default};
