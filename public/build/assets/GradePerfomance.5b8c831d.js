import{C as P,a as B,L as E,B as j,p as R,b as T,c as k,G as z,d as p,S as x,e as G}from"./App.7283f78f.js";import{r as s}from"./vendor.fd4def91.js";import{j as a,a as c}from"./index.3350170c.js";P.register(B,E,j,R,T,k);const L=(h,o)=>({indexAxis:o?"y":"x",responsive:!0,maintainAspectRatio:!1,redraw:!0,plugins:{legend:{position:"top"},title:{display:!0,text:h},barValueSpacing:40,tooltips:{displayColors:!0,callbacks:{mode:"x"}},datalabels:{display:b=>!1},scales:{xAxes:[{gridLines:{display:!0,drawBorder:!1}}],yAxes:[{gridLines:{display:!1,drawBorder:!0}}]}}}),F=()=>{const h=!1,{authToken:o}=s.exports.useContext(z),[b,$]=s.exports.useState([]),[N,A]=s.exports.useState([]),[_,v]=s.exports.useState([]),[t,w]=s.exports.useState({}),[i,g]=s.exports.useState({}),[u,y]=s.exports.useState(""),d=localStorage.getItem("classId")||"",n="/api/analytics",[S,m]=s.exports.useState([]),C=(e,l,r)=>{p.get(`${n}/${d}/special-paper-analytics/${e}/${l}/${r}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:f})=>m(f||[]))};return s.exports.useEffect(()=>{p.get(`${n}/grade/${d}/special_paper_stats`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:e})=>{$(e.map(({grade:l,is_special:r,_id:f})=>({label:`${l}${r?" | special":""}`,value:`${l}${r?"_special":""}`,is_special:r,_id:f})))})},[]),s.exports.useEffect(()=>{if(!(Object.keys(t).length<1)){if(m([]),t.is_special){p.get(`${n}/${d}/special_paper_stats/${t._id||t.value}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:e})=>{A(e.map(({subType:l,_id:r})=>({value:l,_id:r,label:`${l}s`})))});return}p.get(`${n}/${d}/report_analytics/${t.value}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:e})=>{if(e){m(e||[]);return}})}},[t]),s.exports.useEffect(()=>{Object.keys(i).length>0&&(v([]),p.get(`${n}/${d}/special_paper_stats/${t._id||t.value}/${i._id}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:e})=>{v(e.map(({subsubType:l,_id:r})=>({value:l,label:l,_id:r})))}))},[i]),s.exports.useEffect(()=>{u&&C(t.value,i.value,u)},[u]),a("div",{children:c("div",{className:"row",children:[a("div",{className:"col s12 m12 l4",children:a("div",{className:"card z-depth-0",style:{border:"1px solid #dcdee2"},children:c("div",{className:"card-content",children:[a("span",{className:"card-title center",children:a("b",{children:a("small",{children:"PERFORMANCE ANALYSIS"})})}),c("div",{className:"row",children:[c("div",{className:"col s12 m12",children:[a("label",{children:"Select Subscription"}),a(x,{onChange:e=>{g({}),y(""),w(e||{})},options:b,placeholder:"choose grade..."})]}),c("div",{className:"col s12 m12",hidden:!(t&&t.is_special),children:[a("label",{children:"Select Type"}),a(x,{options:N,onChange:e=>{g(e||{})},placeholder:"choose type..."})]}),c("div",{className:"col s12 m12",hidden:!(i&&i.value),children:[a("label",{children:"Select Paper"}),a(x,{onChange:e=>{y((e==null?void 0:e.value)||"")},options:_,placeholder:"choose paper..."})]})]}),a("div",{className:"row",id:"performanceReportButton",hidden:!0,children:a("div",{className:"col s12 m12",children:c("button",{onClick:()=>{},"data-position":"bottom","data-tooltip":"Scroll down to view or download the report",className:"btn-small sub-modal-texts tooltipped white black-text waves-effect waves-black z-depth-1",style:{width:"100%",fontWeight:"bold"},children:["PERFORMANCE REPORT",a("i",{className:"material-icons right",children:"assessment"})]})})})]})})}),a("div",{className:"col s12 m12 l8",children:a("div",{className:"card z-depth-0",style:{border:"1px solid #dcdee2"},children:a("div",{className:"card-content",children:a("div",{className:"row",id:"insertChart",children:a(G,{options:L("Performance Analysis",h),style:{height:"300px"},data:{labels:S.map(e=>e.subject),datasets:[{label:"Mean",data:S.map(e=>e.performance),backgroundColor:"#00c853"}]}})})})})})]})})};export{F as default,L as options};
