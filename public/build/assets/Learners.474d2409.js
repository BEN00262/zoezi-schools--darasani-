var I=Object.defineProperty;var u=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var x=(s,a,r)=>a in s?I(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r,b=(s,a)=>{for(var r in a||(a={}))L.call(a,r)&&x(s,r,a[r]);if(u)for(var r of u(a))T.call(a,r)&&x(s,r,a[r]);return s};import{G as R,u as v,d as N,f as S,g as O,t as p}from"./App.6553f51d.js";import{r as n}from"./vendor.fd4def91.js";import{j as e,a as i,F as j}from"./index.ca9b2a12.js";const F=s=>p.success(s,{position:p.POSITION.TOP_RIGHT,autoClose:2e3}),k=s=>p.error(s,{position:p.POSITION.TOP_RIGHT,autoClose:2e3}),z=({_id:s,firstname:a,lastname:r,gender:h})=>{const d=v();return e("div",{className:"col s6 m4",children:e("div",{onClick:c=>d(`/learner/${s}`),className:"hoverable z-depth-1",style:{cursor:"pointer",border:"1px solid #d3d3d3",borderRadius:"2px",padding:"5px",marginBottom:"5px"},children:i("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[e("img",{style:{height:"100px",width:"100px",objectFit:"contain",border:"1px solid #d3d3d3",borderRadius:"50%"},src:"https://cdn2.iconfinder.com/data/icons/child-people-face-avatar-3/500/child_152-512.png"}),e("ul",{style:{paddingLeft:"20px"},children:e("li",{style:{letterSpacing:"1px"},children:i("b",{children:[a," ",r]})})})]})})})},H=({classRefId:s})=>{const{authToken:a,isTeacher:r}=n.exports.useContext(R),h=v(),[d,c]=n.exports.useState([]),[m,w]=n.exports.useState([]),[y,C]=n.exports.useState(!1),[f,g]=n.exports.useState("");if(n.exports.useEffect(()=>{N.get(`/api/grade/learners/${s}`,{headers:{Authorization:`Bearer ${a}`}}).then(({data:t})=>{if(t){let l=t.learners;c(l),w(l);return}g("Failed to fetch learners")}).catch(t=>{g(t.message)}).finally(()=>{C(!1)})},[]),y)return e(S,{});const _=t=>{let l=(t.target.value||"").toLowerCase();if(!l){c(m);return}c(m.filter(o=>o.firstname.toLowerCase().indexOf(l)>-1||o.lastname.toLowerCase().indexOf(l)>-1))};return i(j,{children:[i("div",{className:"row",children:[i("div",{className:"col s12 m8 left-align",children:[i("button",{disabled:r,className:"waves-effect waves-light btn-flat",style:{marginRight:"5px"},onClick:t=>h("/learner/import"),children:[e("i",{className:"material-icons right",children:"cloud_upload"}),"Import Learners"]}),i("button",{style:{marginRight:"5px"},disabled:r,className:"waves-effect waves-light btn-flat",onClick:t=>h("/learner/new"),children:[e("i",{className:"material-icons right",children:"person_add"}),"Add Learner"]}),i("button",{disabled:!d.length,className:"waves-effect waves-light btn-flat",onClick:t=>{const l=localStorage.getItem("classRefId")||"";N.get(`/api/grade/learners/credentials/${l}`,{headers:{Authorization:`Bearer ${a}`}}).then(async({data:o})=>{if(o){if(await O(o,"credentials.xlsx")){F("Exported leaners credentials successfully!");return}k("Failed to export learners credentials. Please contact zoezi team")}})},children:[e("i",{className:"material-icons right",children:"cloud_download"}),"Export Credentials"]})]}),e("div",{className:"col s12 m4 right-align",children:e("input",{type:"search",className:"browser-default",onChange:_,style:{border:"1px solid #d3d3d3",borderRadius:"20px",lineHeight:"1px",padding:"5px 10px"},placeholder:"search learner..."})})]}),f?e("div",{className:"row",children:e("div",{className:"col s12",children:i("div",{className:"sub-modal-texts",style:{borderLeft:"2px solid red",paddingLeft:"5px",paddingRight:"5px",borderRadius:"3px",lineHeight:"4em",backgroundColor:"rgba(255,0,0, 0.1)",display:"flex",flexDirection:"row",alignItems:"center"},children:[e("i",{className:"material-icons left",children:"error_outline"}),e("p",{children:f})]})})}):null,e("div",{className:"row",children:d.map((t,l)=>e(z,b({},t),l))})]})};export{H as default};
