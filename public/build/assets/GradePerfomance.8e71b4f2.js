import{C as j,a as P,L as B,B as E,p as T,b as R,c as k,G as z,d as p,S as x,e as G}from"./App.5b94b10e.js";import{r as l}from"./vendor.fd4def91.js";import{j as a,a as c}from"./index.7f52cc9a.js";j.register(P,B,E,T,R,k);const L=(h,o)=>({indexAxis:o?"y":"x",responsive:!0,maintainAspectRatio:!1,redraw:!0,plugins:{legend:{position:"top"},title:{display:!0,text:h},barValueSpacing:40,tooltips:{displayColors:!0,callbacks:{mode:"x"}},datalabels:{display:f=>!1},scales:{xAxes:[{gridLines:{display:!0,drawBorder:!1}}],yAxes:[{gridLines:{display:!1,drawBorder:!0}}]}}}),F=()=>{const h=!1,{authToken:o}=l.exports.useContext(z),[f,$]=l.exports.useState([]),[N,A]=l.exports.useState([]),[_,g]=l.exports.useState([]),[r,w]=l.exports.useState({}),[i,v]=l.exports.useState({}),[u,y]=l.exports.useState(""),d=localStorage.getItem("classId")||"",n="/api/analytics",[S,m]=l.exports.useState([]),C=(e,t,s)=>{p.get(`${n}/${d}/special-paper-analytics/${e}/${t}/${s}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:b})=>m(b.data||[]))};return l.exports.useEffect(()=>{p.get(`${n}/grade/${d}/special_paper_stats`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:e})=>{$(e.map(({grade:t,is_special:s,_id:b})=>({label:`${t}${s?" | special":""}`,value:`${t}${s?"_special":""}`,is_special:s,_id:b})))})},[]),l.exports.useEffect(()=>{if(!(Object.keys(r).length<1)){if(m([]),r.is_special){p.get(`${n}/${d}/special_paper_stats/${r._id||r.value}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:e})=>{A(e.map(({subType:t,_id:s})=>({value:t,_id:s,label:`${t}s`})))});return}p.get(`${n}/${d}/report_analytics/${r.value}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:e})=>{let t=e.map(s=>({subject:s.subjectName,hits:s.hits,progress:[{subject:s.subjectName,attemptTree:{score:{passed:s.ups,total:s.totalQuestionsAttempted}}}]}));m(t)})}},[r]),l.exports.useEffect(()=>{Object.keys(i).length>0&&(g([]),p.get(`${n}/${d}/special_paper_stats/${r._id||r.value}/${i._id}`,{headers:{Authorization:`Bearer ${o}`}}).then(({data:e})=>{g(e.map(({subsubType:t,_id:s})=>({value:t,label:t,_id:s})))}))},[i]),l.exports.useEffect(()=>{u&&C(r.value,i.value,u)},[u]),a("div",{children:c("div",{className:"row",children:[a("div",{className:"col s12 m12 l4",children:a("div",{className:"card z-depth-0",style:{border:"1px solid #dcdee2"},children:c("div",{className:"card-content",children:[a("span",{className:"card-title center",children:a("b",{children:a("small",{children:"PERFORMANCE ANALYSIS"})})}),c("div",{className:"row",children:[c("div",{className:"col s12 m12",children:[a("label",{children:"Select Subscription"}),a(x,{onChange:e=>{v({}),y(""),w(e||{})},options:f,placeholder:"choose grade..."})]}),c("div",{className:"col s12 m12",hidden:!(r&&r.is_special),children:[a("label",{children:"Select Type"}),a(x,{options:N,onChange:e=>{v(e||{})},placeholder:"choose type..."})]}),c("div",{className:"col s12 m12",hidden:!(i&&i.value),children:[a("label",{children:"Select Paper"}),a(x,{onChange:e=>{y((e==null?void 0:e.value)||"")},options:_,placeholder:"choose paper..."})]})]}),a("div",{className:"row",id:"performanceReportButton",hidden:!0,children:a("div",{className:"col s12 m12",children:c("button",{onClick:()=>{},"data-position":"bottom","data-tooltip":"Scroll down to view or download the report",className:"btn-small sub-modal-texts tooltipped white black-text waves-effect waves-black z-depth-1",style:{width:"100%",fontWeight:"bold"},children:["PERFORMANCE REPORT",a("i",{className:"material-icons right",children:"assessment"})]})})})]})})}),a("div",{className:"col s12 m12 l8",children:a("div",{className:"card z-depth-0",style:{border:"1px solid #dcdee2"},children:a("div",{className:"card-content",children:a("div",{className:"row",id:"insertChart",children:a(G,{options:L("Performance Analysis",h),style:{height:"300px"},data:{labels:S.map(e=>e.subject),datasets:[{label:"Mean",data:S.map(e=>e.performance),backgroundColor:"#00c853"}]}})})})})})]})})};export{F as default,L as options};
